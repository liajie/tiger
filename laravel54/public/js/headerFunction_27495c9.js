function zhReport(e){if("undefined"==typeof YA)return!1;var e=e||{},n={pro:"huya_web",pas:YA.cookie.get("username")||"",yyuid:YA.cookie.get("yyuid")||"",pageType:"root",rso:"",rso_desc:"",eid:"",eid_desc:""},t=function(e,n,t,i,a){var o=e+"="+n+"; domain="+t+"; path="+i;a>0&&(o=o+"; expires="+a.toGMTString()),document.cookie=o};for(var i in e)n[i]=e[i];"undefined"==typeof ya&&(window.ya=new YA(n.pro,n.pas,{pageType:n.pageType,yyuid:n.yyuid}),ya.reportProductStartUp({pro:n.pro,rso:n.rso,rso_desc:n.rso_desc,ref:YA.cookie.get("ya_eid")}),ya.startProductHeartbeat({pro:n.pro,rso:n.rso,ref:YA.cookie.get("ya_eid"),rso_desc:n.rso_desc}),ya.reportProductEvent({eid:n.eid,eid_desc:n.eid_desc,rso:n.rso,rso_desc:n.rso_desc,ref:YA.cookie.get("ya_eid")}),TT.emit("reportReady"),$("body").on("click",".clickstat",function(){var e="";$(this).attr("href")&&(e=$(this).attr("eid").substring(6),t("ya_eid",e,TT.domainForWriteCookie,"/")),ya.reportProductEvent({eid:$(this).attr("eid"),eid_desc:$(this).attr("eid_desc"),ref:YA.cookie.get("ya_eid")})}),$("body").on("click",".new-clickstat",function(){var e="",n=$(this);try{var i=$.parseJSON(n.attr("report"));$(this).attr("href")&&(e=i.position,t("ya_eid",e,TT.domainForWriteCookie,"/")),i.ref=YA.cookie.get("ya_eid"),ya.reportProductEvent(i)}catch(a){}}),$("body").on("click",".third-clickstat",function(){var e=$(this).data("thirdstat"),n=n||new Image;n.src=e}))}function parseQueryString(e){var n,t={};if(-1!=(n=e.indexOf("?")))for(var i=e.substring(n+1,e.length),a=i.split("&"),o=[],r=0,s=a.length;s>r;r++)o=a[r].split("="),t[o[0]]=o[1];return t}!function(){var e=window.TT_CFG={},n=location.protocol+"//"+location.host+"/";e.login={switchState:window.UDB_SDK_SWTICH,YY:{authUrl:n+"udb_web/authorizeURL.php?do=authorizeEmbedURL",callbackUrl:n+"udb_web/udbport2.php?do=callback",OAuthUrl:n+"udb_web/udbport2.php?do=dummy3AuthorizeURL&loginType={type}",logoutUrl:n+"udb_web/udbport2.php?do=logout",regUrl:n+"udb_web/udbport2.php?do=registerEmbedURL&registerUrl=https://zc.yy.com/reg/udb/reg4udb.do&type={type}"},TT:{loginCallback:n+"udb_web/udbport2.php?m=HuyaHome&do=huyaLCallback",logoutCallback:n+"udb_web/udbport2.php?m=HuyaHome&do=huyaLogout",loginAuthCallback:n+"udb_web/udbport2.php?m=HuyaHome&do=thirdLCallback",regUrl:n+"udb_web/udbport2.php?do=registerEmbedURL&registerUrl=https://zc.yy.com/reg/udb/reg4udb.do&type=Mobile"}},e.req={userInfo:function(){return $.getJSON(n+"udb_web/checkLogin.php")},userNick:function(){return $.getJSON(n+(UDB_SDK_SWTICH?"udb_web/udbport2.php?m=HuyaHome&do=checkUserNick":"udb_web/udbport2.php?do=checkUserNick"))},userAvatar:function(e){return $.ajax({url:"//user.huya.com/user/getUserInfo",data:{uid:e},dataType:"jsonp",cache:!0})}}}(),!function(e){e.HUYA_UTIL={trim:function(e){var n=/^(\s|\u00A0)+|(\s|\u00A0)+$/g;return(e||"").replace(n,"")},xssFilter:function(e){return"string"!=typeof e?e:e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;")},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},createStyleSheet:function(e){var n;return document.createStyleSheet?(n=document.createStyleSheet(),n.cssText=e):(n=document.createElement("style"),n.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(n)),n},deleteCookie:function(e,n,t){if(this.hasCookie(e)){var i=new Date;i.setTime(i.getTime()-864e5),document.cookie=e+"=_; expires="+i.toGMTString()+"; domain="+n+"; path="+t}},writeCookie:function(e,n,t,i,a){var o=e+"="+n+"; domain="+t+"; path="+i;a>0&&(o=o+"; expires="+a.toGMTString()),document.cookie=o},hasCookie:function(e){if(document.cookie.length>0){var n=document.cookie.indexOf(e+"=");if(-1!=n)return!0}return!1},getCookieVal:function(e){for(var n=document.cookie.split("; "),t=0;t<n.length;t+=1){var i=n[t].split("=");if(i[0]==e)return decodeURIComponent(i[1])}return""},getScript:function(e,n){function t(){o.onload=o.onreadystatechange=null,o=null,"function"==typeof n&&n()}var i=document,a=i.head||i.getElementsByTagName("head")[0]||i.documentElement,o=i.createElement("script");"onload"in o?o.onload=t:o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&t()},o.charset="utf-8",o.type="text/javascript",o.async=!0,o.src=e,a.appendChild(o)},throttle:function(e,n){function t(){o=arguments,r=this,a||(a=setTimeout(function(){a=null,e.apply(r,o),r=o=null},i?0:n),i&&(i=!1))}var i=!0,a=null,o=null,r=null;return t.cancel=function(){clearTimeout(a),a=r=o=null},t},debounce:function(e,n,t){var i=null,a=function(){i&&clearTimeout(i);var a=this,o=arguments;return t?(i||e.apply(a,o),i=setTimeout(function(){i=null},n)):i=setTimeout(function(){i=null,e.apply(a,o)},n),a};return a.cancel=function(){clearTimeout(i),i=null},a},isMobile:function(){return navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?!0:!1}(),extend:function(e,n){for(var t in n)"undefined"!=typeof n[t]&&n.hasOwnProperty(t)&&(e[t]=n[t]);return e},getLocationSearchParam:function(){var e={},n=location.search;if(-1!=n.indexOf("?"))for(var t=n.substr(1).split("&"),i=0,a=t.length;a>i;i++){var o=t[i].split("=");o[0]&&(e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]))}return e}}}(window),!function(){var e={};e.env=e.type=0,location.search.replace(/TT_ENV=(.)/,function(n,t){var i=parseInt(t,10);return isNaN(i)||(e.env=i),n}),e.isProd=0==e.env,e.debug=!e.isProd,e.log=function(){var n=!1;try{n=!!localStorage.getItem("TT_DEBUG")}catch(t){}return e.debug||n?console.log.apply(console,arguments):void 0},e.domain={main:"www.huya.com",i:"i.huya.com",hd:"hd.huya.com"},e.app={main:location.protocol+"//"+e.domain.main+"/",act:location.protocol+"//"+e.domain.main+"/act/",i:"http://"+e.domain.i+"/",hd:"http://"+e.domain.hd+"/"},e.domainForWriteCookie="huya.duowan.com"==location.host?"duowan.com":"huya.com",e.trimUrl=function(e){return $.trim(e).replace(/^http\:/,"")},window.TT=e}(),TT.Event=function(){function e(){return{fired:!1,data:[],callbacks:new $.Callbacks}}function n(){function n(n,t,i){if(!o(n)||!a(t))return this;var r=c[n]||(c[n]=new e);return r.callbacks.add(t),i&&r.fired&&t.apply(this,r.data),this}function t(n){if(!o(n))return this;var a=c[n]||(c[n]=new e);return a.fired=!0,a.data=i.call(arguments,1),a.callbacks.fireWith(this,a.data),"ALL"!==n&&t.apply(this,["ALL"].concat(i.call(arguments))),this}function r(e,n){var t=arguments.length;if(0===t)for(var i in c)c.hasOwnProperty(i)&&c[i].callbacks.empty();else if(o(e)){var r=c[e];r&&(1===t?r.callbacks.empty():a(n)&&r.callbacks.remove(n))}return this}function s(e,t,i){if(!o(e)||!a(t))return this;var s=function(){t.apply(this,arguments),r(e,s)};n(e,s,i)}var c={};return{on:n,one:s,off:r,emit:t}}var t=[],i=t.slice,a=function(e){return"function"==typeof e},o=function(e){return"string"==typeof e};return n}(),TT.event=new TT.Event,function(){var e={},n={},t=-1;e.publish=function(e){var t=arguments;n[e]||(n[e]={published:!1,data:null,subscribers:[]});var i=n[e];i.published=!0,i.data=Array.prototype.slice.call(t);for(var a=i.subscribers.length,o=null;a--;)o=i.subscribers[a],o.func.apply(o,t);return!0},e.subscribe=function(e,i,a){if("function"!=typeof i)return-1;n[e]||(n[e]={published:!1,data:null,subscribers:[]});var o=(++t).toString(),r={token:o,func:i};return n[e].subscribers.push(r),a&&n[e].published&&i.apply(r,n[e].data),o},e.unsubscribe=function(e){for(var t in n)if(n.hasOwnProperty(t))for(var i=n[t].subscribers,a=0,o=i.length;o>a;a++){var r=i[a];if(r.token===e)return i.splice(a,1),e}return!1},TT.on=function(){e.subscribe.apply(e,arguments)},TT.off=function(){e.unsubscribe.apply(e,arguments)},TT.emit=function(){e.publish.apply(e,arguments)},window.DUYA_SUB=e}(),!function(e,n,t){function i(n){if(!(this instanceof i))return new i(n);udb=this;var a=t.lazyPromise(function(e){r().done(function(){e.call(udb,new HyLogin(n))})}),o=function(e){return function(){var n=arguments;a(function(t){"function"==typeof t[e]&&t[e].apply(t,n)})}},s=["login","logout","register","on","off","once"];e.each(s,function(e,n){udb[n]=o(n)})}var a=t.lazyLoadScript("https://udbres.huya.com/js/HyUDBWebSDK-1.6.js"),o=t.lazyLoadScript("https://udbres.huya.com/js/HyLoginSDK-1.1.js"),r=function(){return e.when(a(),o())};i.loadAssets=r,n.TT_HUYA_SDK=i}(jQuery,window,function(){var e={},n=e.once=function(e){var n,t;return function(){return t||(t=!0,n=e.apply(this,arguments)),n}},t=e.lazyPromise=function(e){var t=n(function(){var n=new $.Deferred;return e(function(){n.resolveWith(this,arguments)}),function(e){return n.done(e).promise()}});return function(e){return t()(e)}},i=e.getScript=function(e,n){function t(){o.onload=o.onreadystatechange=null,o=null,"function"==typeof n&&n()}var i=document,a=i.head||i.getElementsByTagName("head")[0]||i.documentElement,o=i.createElement("script");"onload"in o?o.onload=t:o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&t()},o.charset="utf-8",o.type="text/javascript",o.async=!0,o.src=e,a.appendChild(o)};return e.lazyLoadScript=function(e){return t(function(n){i(e,n)})},e}()),!function(e,n,t,i){function a(e){function r(n){var t=e.OAuthUrl.replace("{type}",n);d=window.open(t,"_blank"),d.focus()}if(!(this instanceof a))return new a(e);var s=n.extend(this,new i),c=s.ready=t.lazyPromise(function(e){o(function(){var n=document.getElementById("udbsdk_login_content");n||(n=document.createElement("div"),n.id="udbsdk_login_content",document.body.appendChild(n)),n.style.display="none";try{UDB.sdk.PCWeb.initialize()}catch(t){}s.loginView=n,e.call(s)})}),l=window.NAV_UTIL?window.NAV_UTIL:window.NAV_UTIL={},u=-1==e.authUrl.indexOf(location.host);s.login=function(){var t=n.ajax({type:u?"GET":"POST",url:e.authUrl,data:{callbackURL:e.callbackUrl},dataType:u?"jsonp":"json"});n.when(t,c()).done(function(n){var t=n[0];t&&(s.loginView.style.display="block",UDB.sdk.PCWeb.embedOpenLgn(t,e.callbackUrl),s.emit("loginOpen"))})},l.UDBLoginCallback=function(){s.emit("verifySuccess")},TT.on("UDB_LOGIN_SUCCESS",function(e,n){s.emit("loginSuccess",n)});var d=null;s.loginByWX=function(){r("weixin")},s.loginByQQ=function(){r("qq")},s.loginByWB=function(){r("weibo")},l.reloadPage=function(){d&&d.close(),s.emit("loginOAuthCallback")},l.loginFail=function(e){d&&d.close(),s.emit("loginOAuthFail",e)},s.logout=function(t){var i=n.ajax({type:"GET",url:e.logoutUrl,dataType:u?"jsonp":"text"});n.when(i,c()).done(function(e){var n=e[0];n&&UDB.sdk.PCWeb.deleteCrossmainCookieWithCallBack(n,function(){!t&&s.emit("logoutSuccess")})})},s.registerPhone=function(t,i){n.ajax({url:e.regUrl.replace("{type}","Mobile"),type:u?"GET":"POST",dataType:u?"jsonp":"json"}).done(function(e){"1"==e.success?t&&t(e):i&&i(e)})},s.registerMail=function(t,i){n.ajax({url:e.regUrl.replace("{type}","Email"),type:u?"GET":"POST",dataType:u?"jsonp":"json"}).done(function(e){"1"==e.success?t&&t(e):i&&i(e)})}}var o=t.lazyLoadScript("//res.udb.duowan.com/lgn/js/oauth/udbsdk/pcweb/udb.sdk.pcweb.embed.min.js?_=2333");a.loadAssets=o,e.TT_YYUDB=a}(window,jQuery,function(){var e={},n=e.once=function(e){var n,t;return function(){return t||(t=!0,n=e.apply(this,arguments)),n}},t=e.lazyPromise=function(e){var t=n(function(){var n=new $.Deferred;return e(function(){n.resolveWith(this,arguments)}),function(e){return n.done(e).promise()}});return function(e){return t()(e)}},i=e.getScript=function(e,n){function t(){o.onload=o.onreadystatechange=null,o=null,"function"==typeof n&&n()}var i=document,a=i.head||i.getElementsByTagName("head")[0]||i.documentElement,o=i.createElement("script");"onload"in o?o.onload=t:o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&t()},o.charset="utf-8",o.type="text/javascript",o.async=!0,o.src=e,a.appendChild(o)};return e.lazyLoadScript=function(e){return t(function(n){i(e,n)})},e}(),TT.Event),window.TT_YYLOGIN=function(udb){var html=function(obj){var __p="";with(Array.prototype.join,obj||{})__p+='<div class="huya-login-box" id="J_huyaLoginBox">\r\n    <div class="login-box">\r\n        <div class="login">\r\n            <div class="login-main">\r\n                <div class="login-hd">\r\n                    <a class="tab-btn">\u767b\u5f55</a>\r\n                    <a class="tab-btn">\u6ce8\u518c</a>\r\n                    <i class="line J_line"></i>\r\n                </div>\r\n                <div class="login-bd">\r\n                    <div class="login-content">\r\n                        <div class="tab-unit">\r\n                            <div id="login-tab">\r\n                                <h2 class="login-title">\u5e10\u53f7\u767b\u5f55</h2>\r\n                                <div class="login-view" id="J_loginView"></div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="tab-unit">\r\n                            <div class="register-tab">               \r\n                                <iframe frameborder="0" scrolling="no" allowtransparency="true" height="370"></iframe>\r\n                                <!-- <div><a class="reg-by-mail" href="#">\u4f7f\u7528\u90ae\u7bb1\u6ce8\u518c&gt;</a></div> -->\r\n                            </div>\r\n                            <div class="register-tab">\r\n                                <iframe frameborder="0" scrolling="no" allowtransparency="true" height="370"></iframe>\r\n                                <div><a class="reg-by-phone" href="#">\u4f7f\u7528\u624b\u673a\u6ce8\u518c&gt;</a></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <i class="login-loading J_loading"></i>\r\n                </div>\r\n            </div>\r\n            <div class="login-sidebar">\r\n                <h2 class="title">\u5408\u4f5c\u8d26\u53f7\u767b\u5f55</h2>\r\n                <div class="other-login">\r\n                    <a class="login-btn login-btn-wechat clickstat" eid="click/nav/weixinlogin" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u5fae\u4fe1\u8d26\u53f7\u767b\u5f55"><i class="icon"></i>\u5fae\u4fe1\u5e10\u53f7\u767b\u5f55</a>\r\n                    <a class="login-btn login-btn-qq clickstat" eid="click/nav/qqlogin" eid_desc="\u70b9\u51fb/\u5bfc\u822a/QQ\u8d26\u53f7\u767b\u5f55" login-type="qq"><i class="icon"></i>QQ\u5e10\u53f7\u767b\u5f55</a>\r\n                    <a class="login-btn login-btn-weibo clickstat" eid="click/nav/weibologin" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u65b0\u6d6a\u5fae\u535a\u767b\u5f55" login-type="weibo"><i class="icon"></i>\u5fae\u535a\u5e10\u53f7\u767b\u5f55</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <a class="login-close" id="js-login-close" title="\u5173\u95ed"></a>\r\n        <p class="login-wran-tip">\u4f7f\u7528\u5373\u4e3a\u540c\u610f\u300a<a class="warn-link" href="http://blog.huya.com/regulation/index.html" target="_blank" title="\u864e\u7259\u8f6f\u4ef6\u7528\u6237\u534f\u8bae">\u864e\u7259\u8f6f\u4ef6\u7528\u6237\u534f\u8bae</a>\u300b</p>\r\n    </div>\r\n    <div class="account-login-mask"></div>\r\n</div>\r\n';return __p}(),box={init:function(){$("body").append(html),udb.ready(function(){$("#J_loginView").append(udb.loginView)}),this.view=$("#J_huyaLoginBox"),this.bind()},bind:function(){var e=this;this.view.on("click",".login-btn-qq",function(e){e.preventDefault(),udb.loginByQQ()}).on("click",".login-btn-weibo",function(e){e.preventDefault(),udb.loginByWB()}).on("click",".login-btn-wechat",function(e){e.preventDefault(),udb.loginByWX()}),this.view.on("click","#js-login-close",function(n){n.preventDefault(),e.close()})},open:function(){this.view.show()},close:function(){this.view.hide()}},tab={init:function(){var e=this,n=$("#J_huyaLoginBox");this.index=-1,this.navItem=n.find(".tab-btn"),this.unit=n.find(".tab-unit"),this.line=n.find(".J_line"),this.navItem.on("click",function(n){n.preventDefault(),e.go($(this).index())})},changeCallbacks:[],go:function(e){if(this.index!==e){this.index=e,this.navItem.removeClass("active").eq(e).addClass("active"),this.unit.hide().eq(e).show(),this.line.css("left",80*e);for(var n=0,t=this.changeCallbacks.length;t>n;n++)this.changeCallbacks[n](e)}},change:function(e){"function"==typeof e&&this.changeCallbacks.push(e)}},regTab={init:function(){var e=this;this.index=-1,this.unit=$(".register-tab"),$(".reg-by-phone").on("click",function(n){n.preventDefault(),e.go(0)}),$(".reg-by-mail").on("click",function(n){n.preventDefault(),e.go(1)})},go:function(e){if(this.index!==e){this.index=e,this.unit.hide().eq(e).show();var n=$("#J_huyaLoginBox").find(".J_loading");this.unit.find("iframe").each(function(t){var i=this;t===e?(n.show(),0===e?udb.registerPhone(function(e){i.src=e.url,n.hide()}):udb.registerMail(function(e){i.src=e.url,n.hide()})):i.src="about:blank"})}}};tab.change(function(e){var n=$("#J_huyaLoginBox").find(".J_loading");0===e?(n.show(),udb.on("loginOpen",function(){n.hide()}),udb.on("verifySuccess",function(){box.close()}),udb.login()):$("#udbsdk_frm_normal").attr("src","about:blank")}),tab.change(function(e){1===e&&-1===regTab.index&&regTab.go(0)});var ready=function(){function e(){t||(t=!0,$(function(){for(box.init(),tab.init(),regTab.init(),n=!0;i.length;)i.shift()()}))}var n,t,i=[];return function(t){"function"==typeof t&&(e(),n?t():i.push(t))}}();return{login:function(){ready(function(){box.open(),tab.go(0)})},register:function(e){ready(function(){switch(box.open(),tab.go(1),e){case"EMAIL":regTab.go(1);break;default:regTab.go(0)}})},close:function(){ready(function(){box.close()})}}},window.TT_YY_SDK=function(e){var n=new TT_YYUDB(e),t=new TT_YYLOGIN(n);return $.extend({},n,t)},function(){function e(e){var a=this,o=HUYA_UTIL.getLocationSearchParam().promoter;o&&HUYA_UTIL.writeCookie("udb_passdata",2,TT.domainForWriteCookie,"/");var r,s=function(){var n=$.Deferred();if(e.switchState){var t=HUYA_UTIL.getCookieVal("udb_passdata");t?n.resolve(1==t?"YY":"TT"):($.ajax({type:"get",url:(TT.isProd?"https://udbapi":"//udbapi-test")+'.huya.com/web/hy/bypass/getBypass?request={"uri":"50001","version":"1.3","context":"WB---","appId":"5002","lcid":"2052","byPass":"1","requestId":"41290051","data":{}}',dataType:"JSONP"}).done(function(e){e&&e.data&&"bypass"in e.data?(HUYA_UTIL.writeCookie("udb_passdata",e.data.bypass,TT.domainForWriteCookie,"/"),n.resolve(1==e.data.bypass?"YY":"TT")):n.resolve("YY")}).fail(function(){n.resolve("YY")}),setTimeout(function(){n.resolve("YY")},3500))}else n.resolve("YY");return function(e){n.done(e)}}(),c={TT:n(t),YY:n(i)},l=function(n){r=c[n](e[n])};s(function(e){l(e)}),a.use=l,$.each(["login","logout","register"],function(e,n){a[n]=function(){var e=arguments;s(function(){"function"==typeof r[n]&&r[n].apply(r,e)})}})}var n=function(e){var n,t;return function(){return t||(t=!0,n=e.apply(this,arguments)),n}},t=function(e){var n=new TT_HUYA_SDK(e);return n.on("loginSuccess",function(){window.location.reload()}),n.on("loginFail",function(){window.location.reload()}),n.on("loginAuthSuccess",function(){window.location.reload()}),n.on("loginAuthFail",function(){window.location.reload()}),n.on("logoutSuccess",function(){window.location.reload()}),n.on("logoutFail",function(){window.location.reload()}),{login:function(){n.login()},logout:function(e){n.logout(e)},register:function(){n.register()}}},i=function(e){var n=new TT_YY_SDK(e);return n.on("loginOAuthCallback",function(){window.location.reload()}),n.on("loginOAuthFail",function(e){if(e&&"MUTE"===e.code){var n=$("body"),t='<div id="login-closure"><div class="login-closure-tit">'+e.data.title+'<span id="login-closure-close"></span></div><div class="login-closure-cnt">'+e.data.msg+'</div><span id="login-closure-sure">\u786e\u5b9a</span></div>';n.append(t),n.append('<div id="login-closure-mask"></div>'),$("#login-closure-sure,#login-closure-close").one("click",function(){$("#login-closure-mask").remove(),$("#login-closure").remove()})}}),n.on("logoutSuccess",function(){-1!=TT.app.i.indexOf(location.hostname)?location.href=TT.app.main:window.location.reload()}),{login:function(){n.login()},logout:function(e){n.logout(e)},register:function(){n.register()}}};TT.login=new e(TT_CFG.login),TT.login.check=function(){var e=n(function(){var e=new $.Deferred;return TT_CFG.req.userInfo().done(function(n){e.resolve(n.isLogined,n)}),e.promise()});return function(n){var t=e();return t.done(n),t}}()}(),!function(e){e.webpReg=/\/yysnapshot\//,e.webpSuffix="/format/webp",e.isSupportWebp=function(){var e=document.createElement("canvas");return e.getContext&&e.getContext("2d")?0===e.toDataURL("image/webp").indexOf("data:image/webp"):!1}()}(window),!function(e,n){e.huya_crossStorage=TT.store=n()}(this,function(){function e(e,n,t){var i={sign:l,type:e,data:n};"get"===e&&(i.token="f_"+(new Date).getTime()+Math.floor(1e9*Math.random()),u[i.token]=t);var a="";try{a=JSON.stringify(i)}catch(o){}a&&d(function(e){e.postMessage(a,"*")})}function n(e){if(/\.huya\.com$/.test(e.origin)){var n=null;try{n=JSON.parse(e.data)}catch(t){}if(n&&n.sign===l&&n.token)if("STORE_CHANGE"===n.token)for(var i=0,a=c.length;a>i;i++)c[i](n.data);else u[n.token](n.data),u[n.token]=null}}var t={setItem:function(){},getItem:function(){},removeItem:function(){},clear:function(){},change:function(){}},i=function(e){return"function"==typeof e},a=function(e){return"string"==typeof e},o=function(e){return"undefined"==typeof e},r="postMessage"in window,s="localStorage"in window;if(!r)return s&&(t=localStorage,t.change=function(e){i(e)&&window.addEventListener&&window.addEventListener("storage",e)}),t;t.setItem=function(n,t){if(n&&a(n)&&!o(t)){var i={};i[n]=t,e("set",i)}},t.getItem=function(n,t){n&&a(n)&&i(t)&&e("get",n,t)},t.removeItem=function(n){n&&a(n)&&e("del",n)},t.clear=function(){e("del")};var c=[];t.change=function(e){i(e)&&(c.push(e),d())};var l="CROSS_STORAGE",u={};"addEventListener"in document?window.addEventListener("message",n,!1):"attachEvent"in document&&window.attachEvent("onmessage",n);var d=function(){var e=null,n=null,t=!1,a=[],o=function(){t=!0,n=e.contentWindow;for(var i=0,o=a.length;o>i;i++)a[i](n)};return function(r){e||(e=document.createElement("iframe"),e.style.display="none",document.body.insertBefore(e,document.body.firstChild),e.attachEvent?e.attachEvent("onload",o):e.onload=o,e.src="//www.huya.com/act/proxy/storage.html"),i(r)&&(t?r(n):a.push(r))}}();return t}),function(){function e(e){var n,t;return function(){return t||(t=!0,n=e.apply(this,arguments)),n}}TT.getUserInfo=function(){var n=e(function(){var e=new $.Deferred;return TT.login.check(function(n,t){if(n){var i={},a={},o=t.userNick?(new $.Deferred).resolve([{}]):TT_CFG.req.userNick();$.when(TT_CFG.req.userAvatar(t.uid),o).done(function(e,n){i=e[0]&&200==e[0].code&&e[0].data?e[0].data:{},a=n[0]||{}}).fail(function(){try{console.log("\u516c\u5171\u5934\uff1a\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25\uff01")}catch(e){}}).always(function(){var n=$.extend(!0,{},t);n.userNick=a.userNick||t.userNick||t.userName,n.userLogo=i.avatar||a.userLogo||t.userLogo||"images/10001.jpg",e.resolve(n)})}else e.resolve(t)}),e.done(function(e){window.a_userIsLogin=e.isLogined,window.a_userName=e.userName}),e.promise()});return function(e){var t=n();return t.done(e),t}}(),TT.sudo=function(e,n){TT.login.check(function(t){t?TT.getUserInfo(e):n!==!1&&TT.login.login()})}}(),!function(){var e=window.HUYA_UTIL;window.NAV_UTIL=window.NAV_UTIL?window.NAV_UTIL:window.NAV_UTIL={},NAV_UTIL.login=function(){TT.login.login()},NAV_UTIL.logout=function(){TT.login.logout()},NAV_UTIL.getStatus=function(e){TT.getUserInfo(function(){"function"==typeof e&&e()})},NAV_UTIL.isLogin=function(){return e.hasCookie("username")},NAV_UTIL.getUserInfo=function(){return NAV_UTIL.isLogin()?{uName:e.getCookieVal("username"),yyID:e.getCookieVal("yyuid")}:null},NAV_UTIL.checkLogin=function(e){TT.sudo(function(n){"function"==typeof e&&e(n.uid,n.userName)})},NAV_UTIL.check=TT.getUserInfo}(),function(){var e=HUYA_UTIL.getLocationSearchParam().promoter;e&&HUYA_UTIL.writeCookie("promoter",e,TT.domainForWriteCookie,"/")}(),!function(){var e=function(){var e=$.Deferred(),n=0,t=function(){++n>=2&&e.resolve()},i=!1,a=setTimeout(function(){i=!0,t()},3500);return $(window).on("load",function(){i||(clearTimeout(a),t())}),TT.on("reportReady",function(){t()},!0),function(n){e.done(n)}}(),n=function(n){var t=[];$.each(n,function(e,n){if(n){var i="pos="+n.pos+",resid="+(n.rsc||0)+(n.ren?",uid="+n.ren:"");t.push("{"+i+"}")}}),e(function(){try{ya.reportProductEvent({eid:"pageview/position",extra_ext:"["+t.join(",")+"]"})}catch(e){}})},t=function(){var e=[],t=null;return function(i){i&&(clearTimeout(t),e.push(i),e.length>=10?(n(e),e=[]):t=setTimeout(function(){n(e),e=[]},2e3))}}();e(function(){$(".J_g_resource").each(function(){t($(this).data())}),$("body").on("click",".J_g_resource",function(){var e=$(this).data();if(e)try{ya.reportProductEvent({eid:"click/position",position:e.pos,resourceid:e.rsc,ayyuid:e.ren})}catch(n){}})}),window.TT_RSC_EXPS=t}();var header_right=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="duya-header-control clearfix">\r\n    <div class="hy-nav-right hy-nav-kaibo">\r\n        <a class="hy-nav-title clickstat" href="'+(null==(__t=TT.app.main)?"":__t)+'e/zhubo" eid="click/navi/kaibo" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u5f00\u64ad" target="_blank">\r\n            <i class="hy-nav-icon hy-nav-video-icon"></i>\r\n            <span class="title">\u5f00\u64ad</span>\r\n        </a>\r\n        <div class="nav-expand-list nav-expand-kaibo">\r\n            <i class="arrow"></i>\r\n            <div class="kaibo-nav">\r\n                <a target="_blank" href="'+(null==(__t=TT.app.main)?"":__t)+'e/zhubo"><i class="hy-nav-video-icon"></i><span>\u6211\u8981\u5f00\u64ad</span></a>\r\n                <a target="_blank" href="#"><i class="hy-nav-home-icon"></i><span>\u516c\u4f1a\u5165\u9a7b</span></a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="hy-nav-right">\r\n        <a class="hy-nav-title clickstat" href="'+(null==(__t=TT.app.main)?"":__t)+'download/" eid="click/navi/download" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u4e0b\u8f7d" target="_blank">\r\n            <i class="hy-nav-icon hy-nav-download-icon"></i>\r\n            <span class="title">\u4e0b\u8f7d</span>\r\n        </a>\r\n        <div class="nav-expand-list nav-expand-download">\r\n            <i class="arrow"></i>\r\n            <div class="download-nav">\r\n                <a target="_blank" href="'+(null==(__t=TT.app.main)?"":__t)+'download/"><i class="hy-nav-app-icon"></i><span>\u79fb\u52a8APP</span></a>\r\n                <a target="_blank" href="'+(null==(__t=TT.app.main)?"":__t)+'download/#players_pc"><i class="hy-nav-play-icon"></i><span>\u4e3b\u64ad\u5de5\u5177</span></a>\r\n                <!-- <a target="_blank" href="'+(null==(__t=TT.app.main)?"":__t)+'download/#tv"><i class="hy-nav-tv-icon"></i><span>\u864e\u7259TV\u7248</span></a> -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="hy-nav-right nav-subscribe success-login">\r\n        <a class="hy-nav-title new-clickstat" href="http://i.huya.com/index.php?m=Subscribe" target="_blank" report=\'{"eid":"click/position","position":"click/navi/dingyue"}\'>\r\n            <i class="hy-nav-icon hy-nav-subscribe-icon"></i>\r\n            <span class="title">\u8ba2\u9605</span>\r\n        </a>\r\n        <div class="nav-expand-list">\r\n            <i class="arrow"></i>\r\n            <div class="subscribe-hd clearfix" style="display:none;">\r\n                <h5>\u6211\u8ba2\u9605\u7684\u6709<em class="subscribe-key">0</em>\u4e2a\u6b63\u5728\u76f4\u64ad</h5>\r\n            </div>\r\n            <div class="subscribe-bd" style="display:none;">\r\n                <ul class="subscribe-list"></ul>\r\n                <a class="subscribe-all" href="http://i.huya.com/index.php?m=Subscribe" target="_blank">\u5168\u90e8\u8ba2\u9605</a>\r\n            </div>\r\n            <div class="mod-list-more">\r\n                <div class="more-loading">\r\n                    <i class="icon-loading"></i>\r\n                    <em>\u6b63\u5728\u52a0\u8f7d\u60a8\u7684\u8ba2\u9605...</em>\r\n                </div>\r\n                <div class="more-empty">\r\n                    <i class="icon-empty"></i>\r\n                    <p>\u6682\u65e0\u8ba2\u9605\u7684\u76f4\u64ad\u3002<br/><em>\u4f60\u53ef\u4ee5\u5728\u4e3b\u64ad\u7684\u64ad\u653e\u9875\u8fdb\u884c\u8ba2\u9605\u5594\uff01</em></p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="hy-nav-right hy-nav-history">\r\n        <a class="hy-nav-title nav-history new-clickstat" id="nav-history" href="http://i.huya.com/index.php?m=Subscribe&watch=1" target="_blank" report=\'{"eid":"click/position","position":"click/navi/lishi"}\'>\r\n            <i class="hy-nav-icon hy-nav-history-icon"></i>\r\n            <span class="title">\u5386\u53f2</span>\r\n        </a>\r\n        <div class="nav-expand-list nav-expand-history">\r\n            <i class="arrow"></i>\r\n            <div class="load-history">\r\n                <div class="mod-list-more">\r\n                    <div class="more-loading">\r\n                        <i class="icon-loading"></i>\r\n                        <em>\u6b63\u5728\u52a0\u8f7d\u60a8\u7684\u5386\u53f2...</em>\r\n                    </div>\r\n                </div>                            \r\n            </div>\r\n            <a href="http://i.huya.com/index.php?m=Subscribe&watch=1" class="nav-expand-history-more J_gNavLogin" style="display:none" target="_blank">\u66f4\u591a&gt;</a>\r\n        </div>\r\n    </div>\r\n    <div class="hy-nav-right un-login">\r\n        <div class="hy-nav-title">\r\n            <i class="hy-nav-icon hy-nav-login-icon"></i>\r\n            <div class="un-login-btn">\r\n                <a class="clickstat" id="nav-login" href="#" eid="click/navi/sign" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u767b\u5f55">\u767b\u5f55</a>\r\n                <i>|</i>\r\n                <a class="clickstat" id="nav-regiest" href="#" eid="click/navi/login" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u6ce8\u518c">\u6ce8\u518c</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="hy-nav-right nav-user success-login">\r\n        <a class="nav-user-title" href="http://i.huya.com/" target="_blank">\r\n            <img id="login-userAvatar" src="images/10001.jpg" alt="\u5934\u50cf" />\r\n            <span id="login-username"></span>\r\n            <i></i>\r\n        </a>\r\n        <div class="nav-expand-list">\r\n            <i class="arrow"></i>\r\n            <div class="tt-user-card">\r\n                <a class="btn-exit" id="nav-loggout" href="#"><i class="hy-nav-exit-icon"></i><span>\u9000\u51fa</span></a>\r\n                <div class="u-info">\r\n                    <a class="avatar" id="J_huyaNavUserCardAvatar" href="http://i.huya.com/" target="_blank">\r\n                        <img src="images/10001.jpg" id="J_huyaNavUserCardAvatarImg" />\r\n                    </a>\r\n                    <p class="nick" id="J_huyaNavUserCardNick">...</p>\r\n                    <p class="user-sign" id="J_huyaNavUserCardSign">...</p>\r\n                    <div class="exp clearfix">\r\n                        <div class="between">\r\n                            <span class="from" id="J_huyaNavUserCardExpFrom">LV-</span>\r\n                            <div class="bar-cnt">\r\n                                <p id="J_huyaNavUserCardBarInfo"></p>\r\n                                <p class="bar">\r\n                                    <i id="J_huyaNavUserCardExpBar"><b class="J_huyaNavUserCardExpText"></b></i>\r\n                                    <span class="J_huyaNavUserCardExpText"></span>\r\n                                </p>\r\n                            </div>\r\n                            <span class="to" id="J_huyaNavUserCardExpTo">LV-</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="u-assets">\r\n                    <div class="bd">\r\n                        <span class="type-name">\u8d44\u4ea7</span>\r\n                        <ul class="type">\r\n                            <li><i class="gold-bean"></i><em id="J_huyaNavUserCardAssetsGb">...</em></li>\r\n                            <li class="type-ticket"><i class="gold-ticket"></i><em id="J_huyaNavUserCardAssetsTk">...</em></li>\r\n                            <li><i class="silver-bean"></i><em id="J_huyaNavUserCardAssetsSb">...</em></li>\r\n                        </ul>\r\n                        <a class="topup new-clickstat" target="_blank" href="http://i.huya.com/?evt=recharge" report=\'{"eid":"click/position","position":"header/usercard/recharge"}\'>\u5145\u503c</a>\r\n                    </div>\r\n                </div>\r\n                <div class="u-task loading" id="J_huyaNavUserCardTask">\r\n                </div>\r\n                <div class="u-links">\r\n                    <ul>\r\n                        <li class="links-i">\r\n                            <a href="http://i.huya.com/" target="_blank" class="new-clickstat" report=\'{"eid":"click/position","position":"header/usercard/entrance1"}\'>                                        \r\n                                <i></i>\r\n                                <p>\u4e2a\u4eba\u4e2d\u5fc3</p>\r\n                            </a>\r\n                        </li>\r\n                        <li class="links-noble">\r\n                            <a href="http://i.huya.com/index.php?m=NobleSys" target="_blank" report=\'{"eid":"click/position","position":"header/usercard/entrance2"}\'>\r\n                                <i></i>\r\n                                <p>\u6211\u7684\u8d35\u65cf</p>\r\n                            </a>\r\n                        </li>\r\n                        <li class="links-msg" id="J_huyaNavUserMsg">\r\n                            <a href="http://i.huya.com/index.php?m=Msg&do=listMsg" target="_blank" report=\'{"eid":"click/position","position":"header/usercard/entrance3"}\'>\r\n                                <i></i>\r\n                                <p>\u6211\u7684\u6d88\u606f</p>\r\n                            </a>\r\n                            <b class="dot" id="J_huyaNavUserMsgDot"></b>\r\n                        </li>\r\n                        <li class="links-play">\r\n                            <a href="'+(null==(__t=TT.app.main)?"":__t)+'e/zhubo" target="_blank" report=\'{"eid":"click/position","position":"header/usercard/entrance4"}\'>\r\n                                <i></i>\r\n                                <p>\u6211\u8981\u76f4\u64ad</p>\r\n                            </a>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="duya-header-tips">\r\n    <em class="close-tips">&times;</em>\r\n    <p class="tips-top">\u6709\u65b0\u7684\u76f4\u64ad\u5185\u5bb9\uff0c<span class="refresh-current">\u5237\u65b0\u770b\u770b</span></p>\r\n    <div id="refresh-wrap">\r\n        <h5>\u4f60\u8ba2\u9605\u7684\u4e3b\u64ad\u4fe1\u606f</h5>\r\n        <div class="refresh-tips"></div>\r\n        <h6><input type="checkbox" id="checkTips"><label for="checkTips">\u4eca\u5929\u5185\u4e0d\u63d0\u9192</label></h6>\r\n    </div>\r\n</div>\r\n';
return __p};$("#J_duyaHeaderRight").html(header_right()),$(function(){DUYA_SUB.publish("huyaHeaderDomReady")}),$(function(){function showDialog(e){function n(e){huya_crossStorage.getItem(e,function(n){n||huya_crossStorage.setItem(e,1)})}function t(){setTimeout(function(){l.remove()}),a&&clearInterval(a),huya_crossStorage.removeItem(key+c)}var i=60,a=null,o=e.data,r=e.afterRender||$.noop,s="object"==typeof o?o:$.parseJSON(o),c=s.eventId,l=$(liveNoticeTmpl({data:s}));l.appendTo("body").animate({bottom:5}).on("click",".notice-close,.notice-btn",function(){t()}),r(l),a=setInterval(function(){if(i--,i>=1){var e=" "+i;l.find(".js-notice-time").text(e)}else t()},1e3),n(key+c)}var liveNoticeTmpl=function(obj){var __t,__p="";with(Array.prototype.join,obj||{})__p+='<div class="huya-head-notice">\r\n    <div class="notice-hd">\r\n        <i class="notice-icon"></i>\r\n        <span class="notice-title">\u76f4\u64ad\u901a\u77e5</span>\r\n        <span class="notice-tip"><span class="js-notice-time">10</span>s\u540e\u81ea\u52a8\u5173\u95ed</span>\r\n        <a class="notice-close" title="\u5173\u95ed\u5f39\u7a97"></a>\r\n    </div>\r\n    <div class="notice-bd">\r\n        ',data.image&&(__p+='\r\n            <a class="notice-pic" href="'+(null==(__t=data.action)?"":__t)+'" target="_blank">\r\n                ',data.gameFullName&&(__p+='<div class="notice-gameFullName">'+(null==(__t=data.gameFullName)?"":__t)+"</div>"),__p+='\r\n                <img src="'+(null==(__t=TT.trimUrl(data.image))?"":__t)+'"> \r\n            </a>\r\n        '),__p+='\r\n        <div class="notice-text">\r\n            <h2 class="anchor-name">'+(null==(__t=data.title)?"":__t)+"</h2>\r\n            ",data.nick&&(__p+='<h3 class="anchor-nick" title="'+(null==(__t=data.nick)?"":__t)+'">'+(null==(__t=data.nick)?"":__t)+"</h3>"),__p+='\r\n            <p class="notice-content" title="'+(null==(__t=data.content)?"":__t)+'">\r\n                '+(null==(__t=data.content)?"":__t)+'\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <a class="notice-btn" href="'+(null==(__t=data.action)?"":__t)+'" target="_blank">\u9a6c\u4e0a\u89c2\u770b</a>\r\n</div>';return __p},key="huya_liveNotice";huya_crossStorage.change(function(e){new RegExp(key).test(e.key)&&null==e.newValue&&$("#"+e.key).remove()}),window.HUYA_HEAD_liveNotice=function(e){showDialog({data:e,afterRender:function(){DUYA_SUB.publish("INDEX_LIVE_NOTICE",e.eventId)}})},window.HUYA_SUBSCRIBE_PUSH=function(e){if(!$.isEmptyObject(e))for(var n in e){var t=e[n],i={title:"\u4f60\u8ba2\u9605\u7684\u4e3b\u64ad: ",content:(t.introduction?'\u5728\u64ad"'+t.introduction+'"':"\u6b63\u5728\u5f00\u64ad\u5566,")+"\u5feb\u62a2\u4e2a\u677f\u51f3\u5750\u597d",image:t.avatar180,action:TT.app.main+t.privateHost,eventId:t.aid,nick:t.nick,gameFullName:t.gameFullName};showDialog({data:i,afterRender:function(e){e.addClass("subscribe-notice"),e.find(".notice-close").addClass("clickstat").attr({eid:"click/dytc/close",eid_desc:"\u70b9\u51fb/\u8ba2\u9605\u5f39\u7a97/\u5173\u95ed"}),e.find(".notice-btn").addClass("clickstat").attr({eid:"click/dytc/in",eid_desc:"\u70b9\u51fb/\u8ba2\u9605\u5f39\u7a97/\u8fdb\u5165\u76f4\u64ad\u95f4"})}})}},window.HUYA_NOTICE_PUSH=function(e){showDialog({data:e,afterRender:function(e){e.addClass("normal-notice")}})}}),$(function(){var e=window.HUYA_UTIL,n=TT.isProd?"//fw.huya.com/":"//test.fw.huya.com/",t={isHuyaLiveRoom:/^\/([A-Za-z0-9]{2,})(|\/)$/.test(location.pathname),isHuyaIndex:location.href==TT.app.main},i={userSubscribeList:[],cacheObj:{},isShowRefreshTips:!1,getSubSt:null,getAllLiveSt:null,tips_left:0,refreshPush:function(e){window.HUYA_SUBSCRIBE_PUSH&&window.HUYA_SUBSCRIBE_PUSH(e)},getUserSubscribe:function(){var e=this;$.ajax({url:n+"dispatch?do=userSubscribeAid&uid="+DUYA_INS.userId,type:"GET",dataType:"jsonp",success:function(n){if(1e3==n.status&&(e.userSubscribeList=n.result.list||[],window.localStorage)){var t=JSON.stringify(e.userSubscribeList);localStorage.setItem("huya_header_subscribe",t)}}})},getNewestLive:function(){var e=this;$.ajax({url:n+"dispatch?do=newestLive&time=120",type:"GET",dataType:"jsonp",success:function(n){if(1e3==n.status){var t=e.mapSubscribeList(n.result,e.userSubscribeList);e.refreshPush(t)}}})},mapSubscribeList:function(e,n){var t=this,i={};for(var a in e)for(var o=0,r=n.length;r>o;o++)a.toString()==n[o].toString()&&(i[a]=e[a]);if(!$.isEmptyObject(t.cacheObj))for(var s in i)"undefined"!=typeof t.cacheObj[s]&&delete i[s];return t.cacheObj=i,i},init:function(n){var t=this,i=$(".duya-header-tips");if(i.on("click",".refresh-current",function(){$(this).parent("p").remove(),0==$(".refresh-tips p").length&&i.removeClass("appear-tips")}).on("change","#checkTips",function(){if($(this).attr("checked")){var n=new Date;n.setTime(n.getTime()+864e5),e.writeCookie("stopPushSub","1",TT.domainForWriteCookie,"/",n),$("#refresh-wrap").remove(),t.isShowRefreshTips||(i.removeClass("appear-tips"),t.isShowRefreshTips=!0)}}).on("click",".close-tips",function(){i.removeClass("appear-tips")}),"1"==e.hasCookie("stopPushSub")&&i.find("#refresh-wrap").remove(),"1"!=e.hasCookie("stopPushSub")&&DUYA_INS.islogin&&!location.host.match("admin.huya.com")&&(t.getSubSt=setTimeout(function(){t.getUserSubscribe(),clearTimeout(t.getSubSt),t.getSubSt=setInterval(function(){t.getUserSubscribe()},6e5)},59e3),n||(t.getAllLiveSt=setInterval(function(){t.getNewestLive()},61e3))),$(window).on("scroll",function(){$(".duya-header-tips").length>0&&$(".duya-header-tips").hasClass("appear-tips")&&($(window).scrollTop()>$("#duya-header").height()?i.css({position:"fixed",top:"45px",left:t.tips_left}):i.attr("style",""))}),window.localStorage){var a=localStorage.getItem("huya_header_subscribe");this.userSubscribeList=JSON.parse(a)||[]}this.initRefreshTips()},initRefreshTips:function(){var e=this,n=$(".duya-header-tips");n.on("click",".tips-top .refresh-current",function(){location.reload()}).on("click",".close-tips",function(){n.removeClass("appear-tips")}),t.isHuyaLiveRoom||t.isHuyaIndex||setTimeout(function(){n.addClass("appear-tips").find(".tips-top").show(),e.tips_left=n.offset().left,e.isShowRefreshTips=!0},18e5)}};window.DUYA_PUSH=i}),function(){function e(){var e=this;TT.on("huyaHeaderDomReady",function(){e.init()})}e.prototype.init=function(){var n=this;TT.getUserInfo(function(n){function t(){TT.login.logout(!0);var e=$("body"),n='<div id="offline-notice"><div class="login-closure-tit">\u6e29\u99a8\u63d0\u793a<span id="offline-notice-close"></span></div><div class="login-closure-cnt"><h2 style="text-align: center;font-size: 18px;font-weight: 800;margin-bottom: 5px;">\u4e0b\u7ebf\u901a\u77e5</h2><p style="text-align: center;">\u60a8\u7684\u8d26\u53f7'+HUYA_UTIL.getCookieVal("username")+'\uff0c\u4fee\u6539\u4e86\u767b\u5f55\u5bc6\u7801\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55</p></div><span id="offline-notice-sure">\u91cd\u65b0\u767b\u5f55</span></div><div id="offline-notice-mask"></div>';e.append(n),$("#offline-notice-sure,#offline-notice-close").one("click",function(){$("#offline-notice-mask").remove(),$("#offline-notice").remove()}),$("#offline-notice-sure").one("click",function(){TT.login.login()})}var i=e.prototype;if(1==n.isChanged&&t(),i.islogin=n.isLogined,i.userName=n.userName,i.userNick=n.userNick,i.userLogo=n.userLogo,i.userId=n.uid,n.isLogined){$("#duya-header .success-login").show(),$("#login-username").attr("title",i.userNick).text(i.userNick),$("#login-userAvatar").attr("src",TT.trimUrl(i.userLogo)),DUYA_SUB.publish("getUserInfoComplete",{name:i.userName,nick:i.userNick,avatar:i.userLogo});var a=-1!=location.host.indexOf(TT.domain.main)||-1!=location.host.indexOf(TT.domain.i);DUYA_PUSH.init(a)}else $("#duya-header .un-login").show();"function"==typeof window.checkLoginCallback&&window.checkLoginCallback()}),n.headEven()},e.prototype.headEven=function(){var e=$("#duya-header");$(".J_gNavLogin").on("click",function(e){HUYA_UTIL.getCookieVal("yyuid")||(e.preventDefault(),TT.login.login())}),e.find("#nav-login").click(function(e){e.preventDefault(),TT.login.login()}),e.find("#nav-regiest").click(function(e){e.preventDefault(),TT.login.register()}),e.find("#nav-loggout").click(function(e){e.preventDefault(),TT.login.logout()})},e.prototype.myMessageShow=function(){var e=$("#J_huyaNavUserMsgDot");e.show(),$("#J_huyaNavUserMsg").off("click").on("click",function(){e.hide()})},e.prototype.myMessageHide=function(){$("#J_huyaNavUserMsgDot").hide()},window.DUYA_INS=new e}(),$(function(){function e(e){var t=document.body.className.replace(/(^[\s\t\xa0\u3000]+|[\s\t\xa0\u3000]+$)/g,""),i=t?document.body.className.split(/\s+/):[],a=n(i,"w-1000");1===e?-1!=a&&(i.splice(a,1),document.body.className=i.join(" ")):-1==a&&(i.push("w-1000"),document.body.className=i.join(" "))}var n=function(e,n){for(var t=0,i=e.length;i>t;t++)if(e[t]===n)return t;return-1},t=document.documentElement?document.documentElement:document.body,i=function(){var e=t.clientWidth;return e>=1480?1:0},a=i();e(a);var o=null,r=function(){clearTimeout(o),o=setTimeout(function(){var n=i();n!==a&&e(a=n)},60)};$(window).on("resize",function(){r(),DUYA_SUB.publish("resizeWide",t.clientWidth)})}),$(function(){function e(){this.initialize.apply(this,arguments)}e.prototype={initialize:function(){var e=null,n=this;if(n.input=$("#searchForm_id input"),e=window.localStorage.getItem("header/placeholder"))try{n.setVal(e)}catch(t){}$(window).on("load",function(){setTimeout(function(){n.ajaxGetPlaceholder()},500)})},setVal:function(e){this.val=e,this.input.val(this.val),this.bind()},ajaxGetPlaceholder:function(){var e=TT.app.main+"/cache10min.php?m=Search&do=getHotword&v=2";HUYA_UTIL.isMobile&&(e=TT.app.main+"/cacheapp.php?m=Search&do=getHotword&v=2"),$.ajax({type:"get",url:e,dataType:"jsonp",jsonpCallback:"huyaNavPlaceholder",cache:!0}).done(function(e){e&&e[0]?window.localStorage.setItem("header/placeholder",e[0]):window.localStorage.removeItem("header/placeholder")})},bind:function(){var e=this;e.input.on("focus",function(){e.input.val()===e.val&&e.input.val("")}).on("blur",function(){""===e.input.val()&&e.input.val(e.val)})}},DUYA_SUB.subscribe("huyaHeaderDomReady",function(){new e},!0)}),$(function(){var e={init:function(){var e=this,n=TT.app.main+"/cache10min.php?m=Game&do=ajaxNavGame";HUYA_UTIL.isMobile&&(n=TT.app.main+"/cacheapp.php?m=Game&do=ajaxNavGame"),$.ajax({type:"get",url:n,dataType:"jsonp",jsonpCallback:"huyaNavCategory",cache:!0}).done(function(n){var t="";t=n&&1e3==n.status&&n.result?e.tpl(n.result):'<a href="'+TT.app.main+'g" class="nav-expand-game-more" target="_blank">\u66f4\u591a <span>&gt;</span></a>',$(".nav-expand-game").append(t),n&&n.result&&n.result.ad&&window.TT_RSC_EXPS&&TT_RSC_EXPS({pos:"nav/category/ad",rsc:n.result.ad.id})})},tpl:function(e){var n="",t=e.hot,i=e.user,a=e.ad,o=0;if(t&&t.length>0){n+='<dl class="clearfix"><dt>\u70ed\u95e8\u5206\u7c7b</dt>';for(var r=0,s=t.length;s>r;r++)o++,n+='<dd><a class="clickstat" eid="click/navi/game/game'+o+'" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u6e38\u620f/\u6e38\u620f'+o+'" title="'+t[r].name+'" href="'+TT.app.main+"g/"+t[r].host+'" target="_blank">'+t[r].name+"</a></dd>";n+="</dl>"}if(i&&i.length>0){n+='<dl class="clearfix"><dt>\u73a9\u5bb6\u63a8\u8350</dt>';for(var r=0,s=i.length;s>r;r++)o++,n+='<dd><a class="clickstat" eid="click/navi/game/game'+o+'" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u6e38\u620f/\u6e38\u620f'+o+'" title="'+i[r].name+'" href="'+TT.app.main+"g/"+i[r].host+'" target="_blank">'+i[r].name+"</a></dd>";n+="</dl>"}return n+='<a href="'+TT.app.main+'g" class="nav-expand-game-more" target="_blank">\u66f4\u591a <span>&gt;</span></a>',a&&(n+='<a href="'+a.link+'" id="J_adCategory" class="clickstat third-clickstat" data-thirdstat="'+a.clickCheckCode+'" data-thirdview="'+a.viewCheckCode+'" eid="click/push/navigame" eid_desc="\u70b9\u51fb/\u63a8\u8350/\u5bfc\u822a\u6e38\u620f\u4e0b\u62c9\u56fe" target="_blank"><img src="'+TT.trimUrl(a.picUrl)+'" width="250" height="60" alt="'+a.title+'"/></a>'),n}};DUYA_SUB.subscribe("huyaHeaderDomReady",function(){function n(e){!function(){var n=$(e).data("thirdview");if(n){var t=t||new Image;t.src=n}}(),function(){function e(){return"undefined"==typeof ya?void(n=setTimeout(function(){e()},1e3)):(clearTimeout(n),void ya.reportProductEvent({eid:"pageview/push/navigame",eid_desc:"\u66dd\u5149/\u63a8\u8350/\u5bfc\u822a\u680f\u4e0b\u62c9\u5e7f\u544a\u4f4d",ref:YA.cookie.get("ya_eid")}))}var n;e()}()}var t=!1,i=null;$(window).on("load",function(){t||(i=setTimeout(function(){e.init(),t=!0},500))}),$("#nav-main").one("mouseover",function(){var a=document.getElementById("J_adCategory");a&&n(a),t||(i&&clearTimeout(i),e.init(),t=!0)})},!0)}),$(function(){var e=HUYA_UTIL.getCookieVal,n=!!e("yyuid"),t={init:function(){var t=this,i=$(".load-history");if(n)$.ajax({type:"get",url:"//fw.huya.com/dispatch",data:{"do":"userHistory",uid:e("yyuid"),guid:e("guid"),token:e("udb_n"),page:1,pageSize:5},dataType:"jsonp",cache:!0}).done(function(e){var n=t.tpl(e&&1e3==e.status?e.result:null);i.html(n)});else{var a="huya_watchHistory";huya_crossStorage.getItem(a,function(e){e&&(e.nowTime=Math.floor(new Date/1e3)),i.html(t.tpl(e))}),huya_crossStorage.change(function(e){(e.key===a||null===e.key)&&huya_crossStorage.getItem(a,function(e){e&&(e.nowTime=Math.floor(new Date/1e3)),i.html(t.tpl(e))})})}},tpl:function(e){var n="";if(e&&e.historyList.length>0){for(var t=e.historyList,i=new Date(1e3*+e.nowTime),a=i.setHours(0,0,0,0),o={today:[],yesterday:[],earlier:[]},r=0;r<t.length;r++)t[r].historyTime=1e3*t[r].historyTime,t[r].historyTime>a?o.today.push(t[r]):a-t[r].historyTime<864e5?o.yesterday.push(t[r]):o.earlier.push(t[r]);var s={today:"\u4eca\u5929",yesterday:"\u6628\u5929",earlier:"\u66f4\u65e9"};for(var c in o){var l=o[c];if(l.length>0){n+='<div class="history-hd"><em></em>'+s[c]+"</div>",n+='<ul class="history-bd">';for(var r=0;r<l.length;r++)n+="<li>",n+=1==l[r].isLive?'<a href="'+TT.app.main+l[r].privateHost+'" title="'+l[r].nick+'" class="new-clickstat" report=\'{"eid":"click/position","position":"click/navi/ls/kb"}\'><em class="live"></em><span class="history-nick">'+l[r].nick+'</span><span class="history-type" title="'+l[r].gameName+'">'+l[r].gameName+"</span></a>":'<a href="'+TT.app.main+l[r].privateHost+'" title="'+l[r].nick+'" class="new-clickstat" report=\'{"eid":"click/position","position":"click/navi/lishi"}\'><em class="notlive"></em><span class="history-nick">'+l[r].nick+'</span><span class="history-type" title="'+l[r].gameName+'">'+l[r].gameName+"</span></a>",n+="</li>";n+="</ul>"}}t.length>=5&&$(".nav-expand-history-more").css("display","block")}else n='<p class="nav-expand-history-null"><i></i><span>\u6700\u8fd1\u60a8\u6ca1\u6709\u89c2\u770b\u8bb0\u5f55</span></p>';return n}};DUYA_SUB.subscribe("huyaHeaderDomReady",function(){$("#nav-history").one("mouseover",function(){t.init()}).on("click",function(e){n||e.preventDefault()})},!0)}),$(function(){var host=TT.app.main,subscribeURL=TT.isProd?"//fw.huya.com/":"//test.fw.huya.com:18081/",follow={init:function(){var e=this,n=HUYA_UTIL.getCookieVal("yyuid");n&&$.ajax({url:subscribeURL+"dispatch?do=subscribeList&uid="+n+"&page=1&pageSize=7",type:"GET",dataType:"jsonp"}).done(function(n){1e3==n.status&&e.tpl(n.result&&n.result.list&&n.result.list.length?n.result.list:[])})},tpl:function(list1){for(var tpl=function(obj){function formatNumber(e){var n=Number(e);return n&&n>1e4&&(e=(n/1e4).toFixed(1)+"\u4e07"),e}var __t,__p="";with(Array.prototype.join,obj||{})__p+="",__p+='\r\n\r\n<li>\r\n\r\n	<a class="video-link new-clickstat" href="'+(null==(__t=link)?"":__t)+'" title="'+(null==(__t=nick)?"":__t)+'" report=\'{"eid":"click/position","position":"click/navi/dy/',__p+=1==isLive?"kb":"wkb",__p+='"}\'>\r\n        <span class="avatar"><img src="'+(null==(__t=TT.trimUrl(avatar180))?"":__t)+'" alt="'+(null==(__t=nick)?"":__t)+'" />',1==isLive&&(__p+="<span>\u5728\u64ad</span>"),__p+='</span>\r\n        <div class="info">\r\n            <p class="name">'+(null==(__t=nick)?"":__t)+'</p>\r\n            <div class="other">\r\n                ',1==isLive&&(__p+='<span class="count"><i></i>'+(null==(__t=formatNumber(totalCount))?"":__t)+"</span>"),__p+='\r\n                <span class="game">'+(null==(__t=gameName)?"":__t)+"</span>\r\n            </div>\r\n        </div>\r\n	</a>\r\n</li>\r\n\r\n";return __p},_tpl="",_navSubDom=$(".nav-subscribe"),_subCount=list1.length,maxLegth=6,onliveNum=0,list1=list1.slice(0,maxLegth),i=0;i<list1.length;i++)_tpl+=tpl({link:host+(list1[i].privateHost||list1[i].yyid),screenshot:list1[i].screenshot,avatar180:list1[i].avatar180,gameName:list1[i].gameName,nick:list1[i].nick,totalCount:list1[i].totalCount,isLive:list1[i].isLive}),1==list1[i].isLive&&onliveNum++;_subCount>0?(_navSubDom.find(".subscribe-hd").show(),_navSubDom.find(".subscribe-bd").show(),_navSubDom.find(".subscribe-list").append(_tpl),_navSubDom.find(".subscribe-key").text(onliveNum),_navSubDom.find(".mod-list-more").hide(),_subCount>maxLegth?_navSubDom.find(".subscribe-all").show():_navSubDom.find(".subscribe-all").hide()):(_navSubDom.find(".subscribe-bd").show(),_navSubDom.find(".more-loading").hide(),_navSubDom.find(".more-empty").show(),_navSubDom.find(".subscribe-all").hide())}};DUYA_SUB.subscribe("huyaHeaderDomReady",function(){$("#duya-header .nav-subscribe").one("mouseenter",function(){follow.init()})},!0)}),TT.on("huyaHeaderDomReady",function(){function signInfo(e){$("#J_huyaNavUserCardSign").html(""==e?'<a href="'+TT.app.i+'?m=UserInfo" target="_blank" class="edit_sign">\u70b9\u51fb\u7f16\u8f91\u4e2a\u6027\u7b7e\u540d</a>':'<span title="'+e+'">'+e+"</span>")}function nobleInfo(e){!e||2!=e.nobleStatus&&3!=e.nobleStatus||$("#J_huyaNavUserCardAvatar").append('<i class="noble-icon noble-level-'+e.nobleLevel+'""></i>')}function LvExper(e){function n(e){a.add(e)}function t(e){e="number"==typeof e?e:parseInt(e,10);var n=$.extend({},i);i.userExp+=e,i.userExp>=i.nextLevelExp&&(i.currLevelExp=i.nextLevelExp,i.nextLevelExp=i.next2LevelExp,i.userLevel+=1),i.levelProgress=(i.userExp-i.currLevelExp)/(i.nextLevelExp-i.currLevelExp)*100,a.fire($.extend({},i),n)}var i=$.extend({},e),a=$.Callbacks();for(var o in i)i.hasOwnProperty(o)&&"number"!=typeof i[o]&&$.isNumeric(i[o])&&(i[o]=parseInt(i[o],10));return{get:function(){return $.extend({},i)},change:n,add:t}}function lvInfo(e){function n(e){$("#J_huyaNavUserCardExpFrom").text("LV"+e.userLevel),$("#J_huyaNavUserCardExpTo").text("LV"+(parseInt(e.userLevel,10)+1)),$("#J_huyaNavUserCardExpBar").css("width",e.userExp/e.nextLevelExp*100+"%"),$(".J_huyaNavUserCardExpText").text(e.userExp+"/"+e.nextLevelExp);var n=$("#J_huyaNavUserCardNick");n.find(".level-icon").remove(),n.find(".gender").remove(),n.append('<i class="gender gender'+e.gender+'"></i>'),n.append('<i class="level-icon level-icon'+e.userLevel+'"></i>');var t=200==e.dailyIncExp?"\u4eca\u65e5\u5df2\u83b7\u5f97<em>200</em>\u70b9\u4e0a\u9650":"\u4eca\u65e5\u83b7\u5f97<em>"+e.dailyIncExp+"</em>\u70b9\u7ecf\u9a8c\u503c";$("#J_huyaNavUserCardBarInfo").html(t+"\uff0c\u5347\u7ea7\u8fd8\u9700<em>"+(e.nextLevelExp-e.userExp)+"</em>\u70b9")}n(e.get()),e.change(n)}function assets(e){function n(e){if(e=""+e,-1==e.indexOf("."))return e;var n=e.split(".");return n[0]+"."+n[1].charAt(0)}var t=parseInt(e[9],10)||0,i=parseInt(e[32],10)||0,a=parseInt(e[8],10)||0,o=function(e){return 1e4>e?e:1e8>e?n(e/1e4)+"\u4e07":n(e/1e8)+"\u4ebf"};$("#J_huyaNavUserCardAssetsGb").text(o(t)),$("#J_huyaNavUserCardAssetsTk").text(o(i)),$("#J_huyaNavUserCardAssetsSb").text(o(a))}function Task(e){var n=function(e,n){return $.ajax({url:TT.app.main+"member/task.php?m=User&do=doGetTaskPrize",data:{taskId:e},dataType:"jsonp"}).done(function(i){200==i.status&&i.data?i.data&&0==i.data.code?n(t(e)):alert({910:"\u4e0d\u53ef\u91cd\u590d\u9886\u53d6",913:"\u4efb\u52a1\u5df2\u4e0b\u7ebf",914:"\u4efb\u52a1\u672a\u5b8c\u6210"}[i.data.code]||"\u7cfb\u7edf\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01("+i.data.code+")"):alert(i.msg)})},t=function(e){var n=a(e);return n&&(n.awardPrize=1,i.fire(n)),n},i=new $.Callbacks,a=function(n){var t=null;return $.each(e,function(e,i){return i.id==n?(t=i,!1):void 0}),t},o=function(){return e},r=function(){var n=[];return $.each(e,function(e,t){t.progress<t.targetLevel&&n.push(t)}),n},s=function(){var n=[];return $.each(e,function(e,t){t.progress>=t.targetLevel&&(t.awardPrize||n.push(t))}),n},c=function(){var n=[];return $.each(e,function(e,t){t.progress>=t.targetLevel&&t.awardPrize&&n.push(t)}),n};return{getPrize:n,award:t,find:a,tasksAll:o,tasksUnripe:r,tasksRipe:s,tasksFinished:c,onFinish:function(e){i.add(e)}}}function TaskNovice(tasks){var task=new Task(tasks),tpl=function(obj){var __t,__p="";with(Array.prototype.join,obj||{}){if(__p+='<div class="task-mod task-novice">\r\n    <div class="mod-hd">\r\n        <p class="mod-tit">\u65b0\u624b\u4efb\u52a1</p>\r\n    </div>\r\n    <div class="mod-bd">\r\n    ',tasks.length){__p+='\r\n        <ul class="tasks">\r\n        ';for(var i=0,l=tasks.length;l>i;i++){var task=tasks[i];__p+="\r\n            <li>\r\n                ",task.progress>=task.targetLevel&&0==task.awardPrize&&(__p+='\r\n                <i class="m-reddot"></i>\r\n                '),__p+='\r\n                <span class="task-icon" title="'+(null==(__t=task.desc)?"":__t)+'"><img src="'+(null==(__t=TT.trimUrl(task.icon))?"":__t)+'" alt="icon" /></span>\r\n                <p class="task-name" title="'+(null==(__t=task.desc)?"":__t)+'">'+(null==(__t=task.name)?"":__t)+"</p>\r\n                ",__p+=task.progress>=task.targetLevel?task.awardPrize?'\r\n                        <a class="task-btn done" href="#">\u5b8c\u6210</a>\r\n                    ':'\r\n                        <a class="task-btn get J_get" data-id="'+(null==(__t=task.id)?"":__t)+'" href="#">\u9886\u53d6</a>\r\n                    ':'\r\n                        <a class="task-btn ing" href="#">'+(null==(__t=task.progress)?"":__t)+"/"+(null==(__t=task.targetLevel)?"":__t)+"</a>\r\n                ",__p+="\r\n            </li>\r\n        "}__p+="\r\n        </ul>\r\n    "}else __p+="\r\n        <p>-- \u6682\u65e0\u4efb\u52a1 --</p>\r\n    ";__p+="\r\n    </div>\r\n</div>\r\n"}return __p};return task.view=$(tpl({tasks:tasks})),task.view.on("click",".J_get",function(){var e=$(this),n=e.data("id");n&&!e.hasClass("disable")&&(e.addClass("disable"),task.getPrize(n,function(n){e.removeClass("disable get J_get"),e.closest("li").find(".m-reddot").remove(),n.exper?(e.addClass("active").text("EXP+"+n.exper),setTimeout(function(){e.removeClass("active").addClass("done").text("\u5b8c\u6210")},1750)):e.addClass("done").text("\u5b8c\u6210")}).always(function(){e.removeClass("disable")}))}),task.onFinish(function(){task.tasksFinished().length>=task.tasksAll().length&&(task.view.find(".mod-bd").html('<div class="task-alldone"></div><div class="open-task-days">\u5f00\u542f\u6bcf\u65e5\u4efb\u52a1\uff0c\u52a0\u901f\u63d0\u5347\u7b49\u7ea7 &gt;</div>'),$(".open-task-days").one("click",function(){TT.emit("taskNoviceSwitchToDays")}))}),task}function TaskDays(tasks){var task=new Task(tasks),tpl=function(obj){var __t,__p="";with(Array.prototype.join,obj||{}){__p+="";var iconMap={189:"c",210:"m",211:"n",212:"o",213:"e",214:"f",215:"h",216:"i",217:"l",218:"j",219:"k",220:"g",221:"b",222:"d",223:"a"};if(__p+='\r\n<div class="task-mod task-days">\r\n    <div class="mod-hd">\r\n        <p class="mod-tit">\u6bcf\u65e5\u4efb\u52a1</p>\r\n        <a class="mod-more" target="_blank" href="'+(null==(__t=TT.app.i+"index.php?m=UserLevel")?"":__t)+'">\u66f4\u591a<i>&gt;</i></a>\r\n    </div>\r\n    <div class="mod-bd">\r\n    ',tasks.length){__p+='\r\n        <ul class="tasks">\r\n            ';for(var i=0,l=tasks.length;l>i;i++){var task=tasks[i];__p+='\r\n                <li>\r\n                    <i class="icon icon-'+(null==(__t=iconMap[task.id])?"":__t)+'"></i>\r\n                    ',task.progress>=task.targetLevel&&0==task.awardPrize&&(__p+='\r\n                    <i class="m-reddot"></i>\r\n                    '),__p+='\r\n                    <span class="tit">'+(null==(__t=task.desc)?"":__t)+'</span> \r\n                    <em class="exp-num">(+'+(null==(__t=task.exper)?"":__t)+'EXP)</em>\r\n                    <span class="status">\r\n                    ',task.progress>=task.targetLevel?(__p+="\r\n                        ",__p+=task.awardPrize?'\r\n                            <span class="status-done">\u5b8c\u6210</span>\r\n                        ':'\r\n                            <a class="status-get J_get" data-id="'+(null==(__t=task.id)?"":__t)+'" href="#">\u9886\u53d6</a>\r\n                        '):__p+='\r\n                            <span class="status-ing">'+(null==(__t=task.progress)?"":__t)+"/"+(null==(__t=task.targetLevel)?"":__t)+"</span>\r\n                    ",__p+="\r\n                    </span>\r\n                </li>\r\n            "}__p+="\r\n        </ul>\r\n    "}else __p+="\r\n        <p>-- \u6682\u65e0\u4efb\u52a1 --</p>\r\n    ";__p+="\r\n    </div>\r\n</div>\r\n"}return __p};return task.view=$(tpl({tasks:tasks})),task.view.on("click",".J_get",function(){var e=$(this),n=e.data("id");n&&!e.hasClass("disable")&&(e.addClass("disable"),task.getPrize(n,function(n){e.removeClass("disable J_get");var t=e.closest("li");t.find(".m-reddot").remove(),n.exper?(e.addClass("active").text("EXP+"+n.exper),setTimeout(function(){e.replaceWith('<span class="status-done">\u5b8c\u6210</span>'),setTimeout(function(){t.hide(500)},1e3)},1750)):(e.replaceWith('<span class="status-done">\u5b8c\u6210</span>'),setTimeout(function(){t.hide(500)},1e3))}).always(function(){e.removeClass("disable")}))}),task}function createTask(e){var n=null;switch(e[0].type){case 3:n=new TaskNovice(e);break;case 2:n=new TaskDays(e)}return n&&$("#J_huyaNavUserCardTask").empty().removeClass("loading").append(n.view),n}function UserCard(e){var n=new LvExper(e.level);lvInfo(n),nobleInfo(e.noble),signInfo(e.level.sign),assets(e.package);var t=createTask(e.tasks||[]);return t&&t.onFinish(function(e){e&&e.exper&&n.add(e.exper)}),{task:t}}function createUserCard(){var e=function(){var e=!1,n=null;return{get:function(){return e},set:function(){e=!0,clearTimeout(n),n=setTimeout(function(){e=!1},1e4)}}}(),n=!1;e.get()||n||(n=!0,$("#J_huyaNavUserCardTask").empty().addClass("loading"),getUserCardData(function(e){TT.emit("userCardCreate",new UserCard(e))}).always(function(){n=!1}))}function getUserCardData(e){return $.ajax({url:TT.app.main+"member/task.php?m=User&do=listTotal",dataType:"jsonp",jsonpCallback:"huyaNavUserCard",cache:!0}).done(function(n){200==n.status?n.data&&e(n.data):TT.log("\u83b7\u53d6\u7528\u6237\u5361\u7247\u6570\u636e\u5931\u8d25: "+n.msg)}).fail(function(e,n){TT.log("\u83b7\u53d6\u7528\u6237\u5361\u7247\u6570\u636e\u5931\u8d25: "+n)})}function getTaskReddotState(e){return $.ajax({url:TT.app.main+"member/task.php?m=User&do=getTaskReddot&uid="+HUYA_UTIL.getCookieVal("yyuid"),dataType:"jsonp",jsonpCallback:"getTaskReddot",cache:!0}).done(function(n){200==n.status&&n.data&&e(n.data.reddot.reddot)})}function once(e){var n,t;return function(){return t||(t=!0,n=e.apply(this,arguments)),n}}var isLogin=!!HUYA_UTIL.getCookieVal("yyuid");if(isLogin){TT.on("taskNoviceSwitchToDays",createUserCard),TT.on("huyaHeaderDomReady",function(){$(".nav-user-title").on("mouseenter",function(){createUserCard();try{ya.reportProductEvent({eid:"click/position",position:"header/usercard/hover"})}catch(e){}}).one("mouseenter",function(){TT.on("getUserInfoComplete",function(e,n){$("#J_huyaNavUserCardAvatarImg").attr("src",TT.trimUrl(n.avatar)),$("#J_huyaNavUserCardNick").empty().append("<span></span>").find("span").text(n.nick)},!0)})},!0);var RED_DOT_STORE_KEY="TT_USER_CARD_RED_DOT_"+TT.env+HUYA_UTIL.getCookieVal("yyuid");TT.store.getItem(RED_DOT_STORE_KEY,function(e){if(e)getReddot().show();else if((new Date).getTime()-getReddot().latestShowTime()>12e4){var n="TT_TASK_RED_DOT_STATE_REQ_"+HUYA_UTIL.getCookieVal("yyuid"),t=parseInt(localStorage.getItem(n)||"0",10);(new Date).getTime()-t>36e5&&getTaskReddotState(function(e){localStorage.setItem(n,(new Date).getTime()),e?getReddot().show():getReddot().hide()})}}),TT.store.change(function(e){e.key===RED_DOT_STORE_KEY&&(e.newValue?getReddot().show():getReddot().hide())}),TT.on("userCardCreate",function(e,n){function t(){n.task.tasksRipe().length>0?getReddot().show():getReddot().hide()}t(),n.task.onFinish(t)},!0),TT.on("userLevelTaskComplete",function(){getReddot().show()}),TT.event.on("AWARD_PRIZE_NOTICE_FROM_I",function(e,n){var t=null;TT.on("userCardCreate",function(n,i){t=i,i.task.award(e)},!0),t||n&&getReddot().hide()}),TT.on("userCardCreate",function(e,n){n.task.onFinish(function(e){TT.event.emit("AWARD_PRIZE_NOTICE_FROM_MAIN",e)})},!0);var getReddot=once(function(){function e(){TT.store.setItem(RED_DOT_STORE_KEY,1),i.show(),o=!0}function n(){TT.store.removeItem(RED_DOT_STORE_KEY),i.hide(),o&&localStorage.setItem(a,(new Date).getTime()),o=!1}function t(){return o?(new Date).getTime():parseInt(localStorage.getItem(a)||"0",10)}var i=$('<b class="m-reddot"></b>'),a="TT_USER_CARD_RED_DOT_LATEST_SHOW"+HUYA_UTIL.getCookieVal("yyuid"),o=!1;return TT.on("huyaHeaderDomReady",function(){$(".nav-user-title").append(i)},!0),{show:e,hide:n,visible:function(){return o},latestShowTime:t}})}},!0),$(function(){function e(){this.initialize.apply(this,arguments)}e.prototype={initialize:function(){var e=null,n=this;if(e=window.localStorage.getItem("header/ads"))try{e=JSON.parse(e),n.createImage(e)}catch(t){}$(window).on("load",function(){setTimeout(function(){n.ajaxGetAds()},500)})},createImage:function(e){$("#J_duyaHdGg").html('<a class="third-clickstat" data-thirdstat="'+e.clickCheckCode+'" href="'+e.link+'" title="'+e.title+'" target="_blank"><img src="'+TT.trimUrl(e.picUrl)+'" alt="'+e.title+'" /></a>'),this.viewReport(e.viewCheckCode)},viewReport:function(e){!function(){var n=e;if(n){var t=t||new Image;t.src=n}}(),function(){function e(){return"undefined"==typeof ya?void(n=setTimeout(function(){e()},1e3)):(clearTimeout(n),void ya.reportProductEvent({eid:"pageview/push/navipic",eid_desc:"\u66dd\u5149/\u63a8\u8350/\u9876\u90e8\u5bfc\u822a\u4f4d",ref:YA.cookie.get("ya_eid")}))}var n;e()}()},ajaxGetAds:function(){var e=TT.app.main+"/cache10min.php?m=Ad&do=ajaxGetAds&type=4&area=24&num=1";HUYA_UTIL.isMobile&&(e=TT.app.main+"/cacheapp.php?m=Ad&do=ajaxGetAds&type=4&area=24&num=1"),$.ajax({url:e,dataType:"jsonp",jsonpCallback:"huyaNavAd",cache:!0}).done(function(e){if(1e3==e.status)if(e.data&&e.data.length){var n=e.data[0];window.localStorage.setItem("header/ads",JSON.stringify(n))}else window.localStorage.removeItem("header/ads");else window.localStorage.removeItem("header/ads"),TT.log("\u83b7\u53d6\u5934\u90e8\u5e7f\u544a\u6570\u636e\u5931\u8d25\uff1a"+e.msg)})}},DUYA_SUB.subscribe("huyaHeaderDomReady",function(){new e},!0)}),!function(){function centerOnScreen(e){var n=($(window).width()-e.width())/2,t=($(window).height()-e.height())/2;return e.css({left:n+"px",top:t+"px"}),e}function showBrowserTip(){if($.browser.msie&&7>=$.browser.version&&"1"!=HUYA_UTIL.hasCookie("browserUpDate")){var expiretime=new Date;if(expiretime.setTime(expiretime.getTime()+864e5),HUYA_UTIL.writeCookie("browserUpDate","1",TT.domainForWriteCookie,"/",expiretime),0==$(".browser-box").length){var sHtml=function(obj){var __p="";with(Array.prototype.join,obj||{})__p+='<div class="huya-header-box browser-box">\r\n    <div class="hd">\r\n        <div class="tip">\u6e29\u99a8\u63d0\u793a</div>\r\n        <i class="close"></i>\r\n    </div>\r\n    <div class="bd">\r\n        <div class="browser">   \r\n            <div class="title-pic"></div>\r\n            <div class="desc">\r\n                \u6d4f\u89c8\u5668\u7248\u672c\u8fc7\u4f4e\uff0c\u5bfc\u81f4\u7f51\u7ad9\u90e8\u5206\u529f\u80fd\u65e0\u6cd5\u6b63\u5e38\u663e\u793a\uff0c\u5efa\u8bae\u5347\u7ea7\u4e3a\uff1a\r\n            </div>\r\n            <ul class="browser-list clearfix">\r\n                <li class="browser-item browser-sougou">\r\n                    <div class="pic">\r\n                        <a class="link" href="http://ie.sogou.com/" target="_blank" ></a>\r\n                        <p class="name">\u641c\u72d7\u6d4f\u89c8\u5668\u6700\u65b0\u7248</p>\r\n                    </div>\r\n                    <a class="download" href="http://ie.sogou.com/" target="_blank">\u4e0b\u8f7d</a>\r\n                </li>\r\n                <li class="browser-item browser-chrome">\r\n                    <div class="pic">\r\n                        <a class="link" href="http://www.google.cn/chrome/browser/desktop/index.html" target="_blank"></a>\r\n                        <p class="name">Chrome\u6d4f\u89c8\u5668\u6700\u65b0\u7248</p>\r\n                    </div>\r\n                    <a class="download" href="http://www.google.cn/chrome/browser/desktop/index.html" target="_blank">\u4e0b\u8f7d</a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n';
return __p},$elem=$(sHtml());$("body").append($elem),centerOnScreen($elem).show(),$(window).on("resize",function(){$elem.is(":visible")&&centerOnScreen($elem)}),$(document).on("click",".browser-box .close",function(){$(".browser-box").hide()})}else $(".browser-box").show()}}showBrowserTip()}(),$(function(){var e=$("#J_duyaHdSearch");e.data("disabled")||HUYA_UTIL.getScript("//a.msstatic.com/huya/main/js/header_search_tip_10ae642.js")});