dwfis.define("widget/backtotop",function(require,exports,module){var backtotop={init:function(){this.render()},render:function(){var _tpl=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<div class="hy-side" id="J_hySide">\r\n    <div class="hy-side-nav">\r\n        <div class="hy-side-nav-item hover-download">\r\n            <a class="clickstat" target="_blank" href="//www.huya.com/download/" eid="click/navi/right/download" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u53f3\u4fa7/\u4e0b\u8f7d">\r\n                <i class="hy-side-nav-phone"></i>\r\n                <p class="hy-side-nav-txt">\u4e0b\u8f7d</p>\r\n            </a>\r\n            <div class="hy-side-nav-download">\r\n                <a class="clickstat side-nav-download1" target="_blank" href="//www.huya.com/download/" eid="click/navi/right/download" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u53f3\u4fa7/\u4e0b\u8f7d">\u4e0b\u8f7dAPP</a>\r\n                <a class="clickstat side-nav-download2" target="_blank" href="//www.huya.com/download/#tv" eid="click/navi/right/download" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u53f3\u4fa7/\u4e0b\u8f7d">\u4e0b\u8f7dTV\u7248</a>\r\n            </div>\r\n        </div>\r\n        <a class="hy-side-nav-item clickstat" target="_blank" href="//www.huya.com/e/zhubo" eid="click/navi/right/shower" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u53f3\u4fa7/\u6211\u8981\u76f4\u64ad">\r\n            <i class="hy-side-nav-video"></i>\r\n            <p class="hy-side-nav-txt">\u5f00\u64ad</p>\r\n        </a>\r\n        <a class="hy-side-nav-item clickstat" target="_blank" href="//www.huya.com/act/coperation/" eid="click/navi/right/hezuo" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u53f3\u4fa7/\u5408\u4f5c">\r\n            <i class="hy-side-nav-cope"></i>\r\n            <p class="hy-side-nav-txt">\u5408\u4f5c</p>\r\n        </a>\r\n        <a class="hy-side-nav-item clickstat" target="_blank" href="http://blog.huya.com/product/81" eid="click/navi/right/kefu" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u53f3\u4fa7/\u5ba2\u670d">\r\n            <i class="hy-side-nav-qa"></i>\r\n            <p class="hy-side-nav-txt">\u53cd\u9988</p>\r\n        </a>\r\n        <a class="hy-side-nav-item clickstat" target="_blank" href="http://help.huya.com" eid="click/navi/right/help" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u53f3\u4fa7/\u5e2e\u52a9">\r\n            <i class="hy-side-nav-help"></i>\r\n            <p class="hy-side-nav-txt">\u5e2e\u52a9</p>\r\n        </a>\r\n        <a class="hy-side-nav-item" id="J_hyBackToTop" style="display:none;" href="#">\r\n            <i class="hy-side-nav-top"></i>\r\n            <p class="hy-side-nav-txt">\u9876\u90e8</p>\r\n        </a>\r\n    </div>\r\n</div>';return __p};$("body").append(_tpl());var _timeout=null,$navBackTop=$("#J_hyBackToTop"),$win=$(".js-responded-list");0==$win.length&&($win=$(window)),$win.on("scroll",function(){clearTimeout(_timeout),_timeout=setTimeout(function(){$win.scrollTop()>200?$navBackTop.show():$navBackTop.hide()},60)}),$navBackTop.click(function(a){a.preventDefault(),$win[0]===window?$("html,body").animate({scrollTop:0},500):$win.animate({scrollTop:0},500)})}};backtotop.init()});
;dwfis.define("widget/search-bar",function(t,e,n){function i(){this.initialize.apply(this,arguments)}!function(){function t(t){return!(!t||!i.test(t))}function e(t,e){this.dataCache={},this.hidden=!0,this.index=null,this.jqInput=t,this.jqSug=null,this.jqItems=null,this.jqCurItem=null,this.onInput=$.Callbacks(),this.onNav=$.Callbacks(),this.onSelect=$.Callbacks(),this.options=$.extend({delay:200,dataTimeout:2e3,navThrottle:32,triggerOnFocus:!0,submitOnEnter:!0,wrapper:'<div class="search-suggest"></div>',template:null,itemSelector:"li[data-sug-item]",curItemClass:"suggest-cur-item",dataSource:null,offsetDelta:null,zIndex:1e3},e),this.dataSource=this.options.dataSource,this._lastVal=null,this.init()}function n(t){var e=32;return t&&t.length>e&&(t=t.substring(0,e)),t}var i=/\{\s*\[(?:native code|function)\]\s*\}/i,s=s||{mix:function(t,e,n){var i;for(i in e)n!==!0&&i in t||(t[i]=e[i]);return t},Object:t(Object.create)?function(t){return Object.create(t)}:function(){function t(){}return function(e){return t.prototype=e,new t}}(),extend:function(t,e,n,i){if(!e||!t)throw new Error("extend failed, verify dependencies");var a=e.prototype,u=s.Object(a);return t.prototype=u,u.constructor=t,t.superclass=a,t.base=e,e!=Object&&a.constructor==Object.prototype.constructor&&(a.constructor=e),n&&s.mix(u,n,!0),i&&s.mix(t,i,!0),t},Class:function(t,e,n){return s.extend(t,Object,e,n)}};e.prototype={init:function(){var t=this,e=this.options;e.template&&(this.compiledTemplate=_.template(e.template));var n=_.debounce(function(e){null==t.dataCache[e]&&e===t.val()&&t.hide()},e.dataTimeout);this._checkDataTimeout=function(e){null==t.dataCache[e]&&n(e)};var i=_.debounce(function(){var e=t._checkVal(t.val());e===!1&&t.jqItems&&t.jqItems.length>0&&t.show()},e.delay);if("oninput"in this.jqInput.get(0))this.jqInput.on("input.suggest",i);else{var s=[9,13,27,37,38,39,40];this.jqInput.on("keyup.suggest paste.suggest cut.suggest",function(t){t&&-1!==_.indexOf(s,t.keyCode)||i()})}e.triggerOnFocus&&this.jqInput.on("focus.suggest",i),e.submitOnEnter||this.jqInput.on("keydown.suggest",function(t){13==t.keyCode&&t.preventDefault()});var a=_.throttle(function(n){if(t.jqItems){var i=t.jqItems.length;if(i){var s=t.index;"up"===n?null==s?s=i-1:(s-=1,0>s&&(s=null)):"down"===n&&(null==s?s=0:(s+=1,s>i-1&&(s=null))),t.index=s,t.jqCurItem&&(t.jqCurItem.removeClass(e.curItemClass),t.jqCurItem=null),null!=s&&(t.jqCurItem=t.jqItems.eq(s).addClass(e.curItemClass)),t.hidden&&t.show(),t.onNav.fire(t.jqCurItem,s,n)}}},e.navThrottle);this.jqInput.on("keydown.suggest",function(e){switch(e.keyCode){case 13:t.jqCurItem&&t.onSelect.fire(t.jqCurItem,e);break;case 38:e.preventDefault(),a("up");break;case 40:e.preventDefault(),a("down")}}).on("keyup.suggest",function(e){27==e.keyCode&&t.hide()}),$(document).on("click.suggest focus.suggest",function(e){var n=$(e.target);n.is(t.jqInput)||t.jqSug&&n.closest(t.jqSug).length>0||t.hide()}),$(window).on("resize.suggest",function(){t.hidden||t.show()})},_checkVal:function(t){if(t===this._lastVal)return!1;var e=this;if(this.onInput.fire(t,this._lastVal),this._lastVal=t,this.dataSource){var n=this.dataSource(t,function(n){n&&(e.dataCache[t]=n,e.val()===t&&e.render(n,t))});n?(this.dataCache[t]=n,this.render(n,t)):n===!1?this._checkDataTimeout(t):this.dataCache[t]?this.render(this.dataCache[t],t):this.hide()}},val:function(){if(0==arguments.length)return $.trim(this.jqInput.val())||"";var t=arguments[0];this.jqInput.val(t),arguments[1]!==!0&&this._checkVal(t)},getLastQuery:function(){return this._lastVal||""},initItems:function(){this.index=null,this.jqCurItem=null,this.jqItems=this.jqSug.find(this.options.itemSelector)},initWrapper:function(){if(!this.jqSug){var t=this,e=this.options;this.jqSug=$(e.wrapper).hide().appendTo(document.body),"static"==this.jqSug.css("position")&&this.jqSug.css("position","absolute"),this.jqSug.css("zIndex",e.zIndex),this.jqSug.on("mouseenter",e.itemSelector,function(){t.jqCurItem&&t.jqCurItem.get(0)!=this&&t.jqCurItem.removeClass(e.curItemClass);var n=$(this);t.jqCurItem=n.addClass(e.curItemClass),t.index=t.jqItems.index(n)}).on("mouseleave",e.itemSelector,function(){t.jqCurItem&&t.jqCurItem.get(0)==this&&(t.jqCurItem.removeClass(e.curItemClass),t.jqCurItem=null,t.index=null)}).on("click",e.itemSelector,function(e){t.onSelect.fire($(this),e)})}},render:function(t){this.initWrapper(),this.compiledTemplate&&this.jqSug.html(this.compiledTemplate(t))},show:function(){if(this.jqSug){var t=this.jqInput.offset();t.top+=this.jqInput.outerHeight();var e=this.options.offsetDelta;return e&&e.x&&(t.left+=e.x),e&&e.y&&(t.top+=e.y),this.jqSug.show().offset(t),this.hidden=!1,this}},hide:function(){return this.jqSug&&this.jqSug.hide(),this.hidden=!0,this.jqCurItem&&(this.jqCurItem.removeClass(this.options.curItemClass),this.jqCurItem=null,this.index=null),this},destroy:function(){this.jqInput&&(this.jqInput.off("input.suggest keyup.suggest paste.suggest cut.suggest keydown.suggest focus.suggest"),$(document).off("click.suggest focus.suggest"),$(window).off("resize.suggest"),this.jqInput=null,this.jqSug&&(this.jqSug.remove(),this.jqSug=null))}},"undefined"==typeof window.localStorage&&(window.localStorage=function(){var t={},e=document.body;if(!e.addBehavior)return t.getItem=t.setItem=t.removeItem=t.clear=function(){},t;var n="data-userdata",i=function(t,i,s,a){e.load(n),s=e.getAttribute(n)||"",a=RegExp("\\b"+t+"\\b,?","i");var u=a.test(s)?1:0;s=i?s.replace(a,""):u?s:""===s?t:s.split(",").concat(t).join(","),e.setAttribute(n,s),e.save(n)};return e.addBehavior("#default#userData"),t.getItem=function(t){return e.load(t),e.getAttribute(t)},t.setItem=function(t,n){e.setAttribute(t,n),e.save(t),i(t)},t.removeItem=function(t){e.removeAttribute(t),e.save(t),i(t,1)},t.clear=function(){e.load(n);var t=e.getAttribute(n).split(","),i=t.length;if(""!==t[0]){for(var s=0;i>s;s++)e.removeAttribute(t[s]),e.save(t[s]);e.setAttribute(n,""),e.save(n)}},t}());var a=TT.app.main,u=location.hostname.match(/(develop|test)\..+([hd]uya\.com)$/);u&&(a=location.protocol+"//"+u[1]+".www."+u[2]);var o="//search.huya.com",r=[],c=a+"/cache10min.php?m=Search&do=getHotword&v=2",h=function(){var t="huya_search_history",e="{%SP%}",i=[],s=10,a=localStorage.getItem(t);if(a)try{i=a.split(e)}catch(u){}return{getList:function(){return i},getLength:function(){return i.length},_set:function(n){i.length=0,_.each(n,function(t){i.push(t)}),n.length>0?localStorage.setItem(t,n.join(e)):localStorage.removeItem(t)},add:function(t){if(t=n(t)){i.unshift(t);var e=_.uniq(i);e.length>s&&(e=e.slice(0,s)),this._set(e)}},remove:function(t){if(t=n(t)){var e=_.without(i,t);e.length!=i.length&&this._set(e)}},clear:function(){this._set([])}}}();window.SearchSuggest=s.extend(function(t,i){var s=this;this.historyData=h,e.call(this,t,$.extend({template:'<% if(history.length){ %><div class="his-items-wrap"><ul class="his-items"><% _.each(history,function(text){ %><li data-sug-item="<%- text %>"><a href="javascript:;" class="del-item-link"><span>x</span></a><em></em><%- checkMaxLength(text) %></li><% }) %></ul><a class="clear-his-btn" href="javascript:;">\u6e05\u7a7a\u8bb0\u5f55</a></div><% } if(history.length && suggest.length){ %><div class="his-items-line"></div><% } if(suggest.length){ %><ul class="search-items"><% _.each(suggest,function(item, i){ %><li data-sug-item="<%- item.text %>"><% if(typeof isHot != "undefined" && isHot){ %><em<% if(i<3){ %> class="top-item"<% } %>><%= i+1 %></em><% } %><%- checkMaxLength(item.text) %></li><% }) %></ul><% } %>',curItemClass:"search-item-hover",dataSource:function(t,e){if(!t)return r.length>0?e({checkMaxLength:n,history:h.getList(),suggest:r.slice(0,10-h.getLength()),isHot:!0}):$.ajax({url:c,type:"get",dataType:"jsonp",cache:!0}).success(function(t){$.each(t,function(t,e){r.push({text:e})}),e({checkMaxLength:n,history:h.getList(),suggest:r.slice(0,10-h.getLength()),isHot:!0})}),!1;var i=s.dataCache[t];return i?e(i):$.ajax(o,{data:{m:"Search","do":"getSearchContent",q:t,uid:0,v:4,typ:-5,livestate:0,rows:5},dataType:"jsonp"}).success(function(i){var a=i;if(0!==a.responseHeader.status)return!1;var u=a.response[1024].docs,o=a.response[1].docs,r=a.response[3].docs,c=a.response[122].docs,h=[];$.each(u,function(t,e){e.game_name&&h.push({text:e.game_name})}),$.each(o,function(t,e){e.game_nick&&h.push({text:e.game_nick})}),$.each(r,function(t,e){e.game_introduction&&h.push({text:e.game_introduction})}),$.each(c,function(t,e){e.title&&h.push({text:e.title})});var l=[],g=[];$.each(h,function(t,e){-1===$.inArray(e.text,g)&&(l.push(e),g.push(e.text))});var d=s.dataCache[t]={checkMaxLength:n,history:[],suggest:l.slice(0,10)};e(d)}),!1}},i)),this.onItemSelect=$.Callbacks(),this.onSelect.add(function(t,e){var n=s._getItemText(t),i=!0;"click"==e.type&&(e.preventDefault(),$(e.target).closest("a.del-item-link").length>0&&(i=!1,h.remove(n),s._rerender())),i&&s.onItemSelect.fire(t,e,n)}),this.onItemSelect.add(function(e,n,i){"click"==n.type&&(s.val(i),t.closest("form").submit())}),this.onNav.add(function(e){e&&t.val(s._getItemText(e))}),t.on("focus",function(){s._rerender()})},e,{_getItemText:function(t){var e=t.data("sug-item")||"";return"string"==typeof e?e:e.toString()},initWrapper:function(){if(!this.jqSug){e.prototype.initWrapper.call(this);var t=this;this.jqSug.on("click","a.clear-his-btn",function(e){e.preventDefault(),h.clear(),t._rerender()})}},render:function(t,n){e.prototype.render.call(this,t,n),this.initItems(),t.history.length>0||t.suggest.length>0?this.show():this.hide()},_rerender:function(){var t=this;setTimeout(function(){var e=t.val();t.dataSource(e,function(n){n&&(t.dataCache[e]=n,t.val()===e&&t.render(n,e))})},0)}})}(),i.prototype={initialize:function(){this.jqInput=$("#search-bar-input"),this.suggest=new SearchSuggest(this.jqInput,{wrapper:'<div class="search-index"></div>'}),this.bindEvent()},bindEvent:function(){var t=this;this.jqInput.closest("form").on("submit",function(e){var n=t.suggest.val();n&&(t.suggest.historyData.add(n),location.search="hsk="+encodeURIComponent(n),e.preventDefault())})},setInputValue:function(t){""!=t&&this.jqInput.val(t)}},n.exports=i});
;dwfis.define("widget/search-game-list",function(require,exports,module){function GameList(){this.initialize.apply(this,arguments)}GameList.prototype={initialize:function(){this.type="game",this.listTpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){for(__p+="",i=0;i<list.length;i++){var data=list[i],url="";__p+='\r\n<li class="search-game-item">\r\n    ',url="undefined"==typeof data.gameHost?TT.app.main+"g/"+data.game_id:TT.app.main+"g/"+data.gameHost,__p+='\r\n    <a target="_blank" href="'+(null==(__t=url)?"":__t)+'" class="g-avatar new-clickstat" title="'+(null==(__t=data.game_name)?"":__t)+'" report=\'{"eid":"click/position","position":"search/'+(null==(__t=columnName)?"":__t)+"/"+(null==(__t=i+1)?"":__t)+'","game_id":"'+(null==(__t=data.game_id)?"":__t)+'"}\'>\r\n        <img src="'+(null==(__t=TT.trimUrl(data.img_url))?"":__t)+"?t="+(null==(__t=cacheTime)?"":__t)+'" alt="'+(null==(__t=data.game_name)?"":__t)+'" onerror="this.onerror=\'\';this.src=\'//a.msstatic.com/huya/main/assets/img/default_game_pc.jpg\'">\r\n    </a>\r\n    <div class="g-info">\r\n        <a target="_blank" href="'+(null==(__t=url)?"":__t)+'" class="g-info-tit ellipsis new-clickstat" title="'+(null==(__t=data.game_name)?"":__t)+'"  report=\'{"eid":"click/position","position":"search/'+(null==(__t=columnName)?"":__t)+"/"+(null==(__t=i+1)?"":__t)+'","game_id":"'+(null==(__t=data.game_id)?"":__t)+"\"}'>"+(null==(__t=$keywordProcess(data.game_name))?"":__t)+"</a>\r\n        <p>\u5f00\u64ad\uff1a"+(null==(__t=data.profileNum)?"":__t)+"\u4e2a</p>\r\n        <p>\u89c2\u4f17\uff1a"+(null==(__t=data.user_count)?"":__t)+"\u4e2a</p>\r\n        ",data.profileNum>0&&(__p+='<a target="_blank" href="'+(null==(__t=url)?"":__t)+'" class="g-info-btn">\u67e5\u770b\u76f4\u64ad</a>'),__p+="\r\n    </div>\r\n</li>\r\n"}__p+=""}return __p}},initList:function(t){this.$listWrap=$("#js-game-list"),this.createList(t)},createList:function(t){var a=t.tplData;a.length>0?this.$listWrap.html(this.listTpl({list:a,columnName:t.type})):this.$listWrap.parents(".search-box").remove()}},module.exports=GameList});
;dwfis.define("components/class/class.js",function(t,n,r){function o(t){return this instanceof o||!f(t)?void 0:i(t)}function e(t){var n,r;for(n in t)r=t[n],o.Mutators.hasOwnProperty(n)?o.Mutators[n].call(this,r):this.prototype[n]=r}function i(t){return t.extend=o.extend,t.implement=e,t}function s(){}function c(t,n,r){for(var o in n)if(n.hasOwnProperty(o)){if(r&&-1===h(r,o))continue;"prototype"!==o&&(t[o]=n[o])}}r.exports=o,o.create=function(t,n){function r(){t.apply(this,arguments),this.constructor===r&&this.initialize&&this.initialize.apply(this,arguments)}return f(t)||(n=t,t=null),n||(n={}),t||(t=n.Extends||o),n.Extends=t,t!==o&&c(r,t,t.StaticsWhiteList),e.call(r,n),i(r)},o.extend=function(t){return t||(t={}),t.Extends=this,o.create(t)},o.Mutators={Extends:function(t){var n=this.prototype,r=u(t.prototype);c(r,n),r.constructor=this,this.prototype=r,this.superclass=t.prototype},Implements:function(t){a(t)||(t=[t]);for(var n,r=this.prototype;n=t.shift();)c(r,n.prototype||n)},Statics:function(t){c(this,t)}};var u=Object.__proto__?function(t){return{__proto__:t}}:function(t){return s.prototype=t,new s},p=Object.prototype.toString,a=Array.isArray||function(t){return"[object Array]"===p.call(t)},f=function(t){return"[object Function]"===p.call(t)},h=Array.prototype.indexOf?function(t,n){return t.indexOf(n)}:function(t,n){for(var r=0,o=t.length;o>r;r++)if(t[r]===n)return r;return-1}});
;dwfis.define("searchList",function(t,s,e){var i=t("components/class/class.js"),a=i.create({initList:function(t){this.$listWrap=$("#"+this.element),this.startRow=0,this.ajaxLoading=!1,this.pageEnd=!1,this.firstRender=!0,this.livestate=0,t&&this._createList(t)},_createList:function(t){var s=(this.type,t.tplData);s.length>0?this.$listWrap.append(this.listTpl({list:s,columnName:this.type})):this.$listWrap.parents(".search-box").remove()},endFn:function(){this.pageEnd=!0;var t='<div class="more-end">\u5168\u90e8\u52a0\u8f7d\u5b8c\u6210</div>';this.$listWrap.append(t)},empty:function(){this.pageEnd=!0;var t='<div class="more-end"><div class="no-find"></div>\u864e\u7259\u541b\u627e\u4e0d\u5230\u548c\u201c'+this.searchKey+"\u201d\u76f8\u5173\u7684"+this.columnName+"</div>";this.$listWrap.append(t)},renderList:function(){this.$jsSearchMain.html('<ul class="search-'+this.type+'-list clearfix searchbox-list" id="'+this.element+'" style="max-height: none;"></ul>'),this.initList(),this.appendItem()},appendItem:function(){var t=this;return 1==this.pageEnd||1==this.ajaxLoading?!1:(this.ajaxLoading=!0,void this.getData({start:this.startRow,rows:this.pageRow,"do":this.searchDo||"getSearchContent",livestate:this.livestate||0},function(s){t.ajaxLoading=!1;var e=s;if(-1!=e.responseHeader.status){t.startRow+=t.pageRow;var i=e.response[t.respNum].docs;t.firstRender&&(t.findResult(e.response[t.respNum].numFound),t.firstRender=!1),i.length>0?(t.$listWrap.append(t.listTpl({list:i,columnName:t.type})),i.length<=20&&t.endFn()):t.startRow!=t.pageRow?t.endFn():t.empty()}}))}});e.exports=a});
;dwfis.define("formatNumber",function(){function r(r,t){for(var e=r?r.toString().split("."):["0"],s=t?t.split("."):[""],a="",n=e[0],u=s[0],i=n.length-1,b=!1,f=u.length-1;f>=0;f--)switch(u.substr(f,1)){case"#":i>=0&&(a=n.substr(i--,1)+a);break;case"0":a=i>=0?n.substr(i--,1)+a:"0"+a;break;case",":b=!0,a=","+a}if(i>=0)if(b)for(var m=n.length;i>=0;i--)a=n.substr(i,1)+a,i>0&&(m-i)%3==0&&(a=","+a);else a=n.substr(0,i+1)+a;a+=".",n=e.length>1?e[1]:"",u=s.length>1?s[1]:"",i=0;for(var f=0;f<u.length;f++)switch(u.substr(f,1)){case"#":i<n.length&&(a+=n.substr(i++,1));break;case"0":a+=i<n.length?n.substr(i++,1):"0"}return a.replace(/^,+/,"").replace(/\.$/,"")}var t={isFormatNumber:!1,formatNumber:function(r){var t=Number(r);return t&&t>1e4?(t/1e4).toFixed(1)+"\u4e07":t},formatNumber2:r,fnFormat:function(r){if(!this.isFormatNumber){var t=r.find(".js-num"),e=this;t.each(function(r,t){var s=$.trim($(t).text());$(t).text(e.formatNumber(s))}),this.isFormatNumber=!0}}};return t});
;dwfis.define("widget/search-host-list",function(require,exports,module){var SearchList=require("searchList"),HostList=(require("formatNumber"),SearchList.extend({initialize:function(opt){this.type="host",this.element="js-host-list",this.listTpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="";for(var i=0;i<list.length;i++){var data=list[i];__p+='\r\n    <li class="host-item">\r\n        <a target="_blank" href="'+(null==(__t=data.game_liveLink)?"":__t)+'" title="'+(null==(__t=data.game_nick)?"":_.escape(__t))+'" class="new-clickstat" report=\'{"eid":"click/position","position":"search/'+(null==(__t=columnName)?"":__t)+"/"+(null==(__t=i+1)?"":__t)+'","ayyuid":"'+(null==(__t=data.aid)?"":__t)+'"}\'>\r\n            <div class="avatar">\r\n                <span><img src="'+(null==(__t=TT.trimUrl(data.game_avatarUrl180)||"")?"":__t)+'" alt="'+(null==(__t=data.game_nick)?"":_.escape(__t))+'" title="'+(null==(__t=data.game_nick)?"":_.escape(__t))+'" alt="'+(null==(__t=data.game_nick)?"":_.escape(__t))+"\" onerror=\"this.onerror='';this.src='images/default_avatar.jpg'\"></span>\r\n                ",0!=data.gameLiveOn&&(__p+='<em class="living"></em>'),__p+="\r\n                ",""!=data.sTagName&&(__p+='<em class="host-tag ellipsis">'+(null==(__t=data.sTagName)?"":__t)+"</em>"),__p+='\r\n                \r\n            </div>\r\n            <div class="nick">'+(null==(__t=$keywordProcess(data.game_nick))?"":__t)+"</div>\r\n            ",""!=data.recommended_text&&(__p+='<div class="intro" title="'+(null==(__t=data.recommended_text)?"":_.escape(__t))+'">'+(null==(__t=data.recommended_text)?"":_.escape(__t))+"</div>"),__p+='\r\n            <div class="mask"></div>\r\n        </a>\r\n    </li>\r\n'}__p+=""}return __p},this.$jsSearchMain=opt.jsSearchMain,this.$findResult=opt.findResult,this.searchKey=opt.searchKey,this.getData=opt.getData,this.respNum=opt.respNum,this.searchUrl=opt.searchUrl,this.columnName="\u4e3b\u64ad",this.pageRow=opt.pageRow},findResult:function(t){this.$findResult.html("\u627e\u5230<em>\u201c"+this.searchKey+"\u201d</em> \u76f8\u5173\u4e3b\u64ad\u5171<em>"+(1e3>t?t:"1000+")+"</em>\u4e2a")},renderList:function(){this.$jsSearchMain.html('<ul class="filter-host clearfix" id="js-filter-host"><li class="on">\u5168\u90e8</li><li>\u76f4\u64ad\u4e2d</li></ul><ul class="search-'+this.type+'-list clearfix searchbox-list" id="'+this.element+'" style="max-height: none;"></ul>'),this.initList(),this.appendItem(),this._bindEvent()},_bindEvent:function(){var t=this;$("#js-filter-host").off().on("click","li",function(){var e=$(this);e.addClass("on").siblings().removeClass("on"),t.$listWrap.html(""),t.initList(),t.livestate=1==e.index()?1:0,t.appendItem()})},_createList:function(t){{var e=(this.type,t.tplData);t.gameNum}e.length>0?this.$listWrap.append(this.listTpl({list:e,columnName:t.type})):this.$listWrap.parents(".search-box").remove()}}));module.exports=HostList});
;dwfis.define("widget/search-live-list",function(require,exports,module){var SearchList=require("searchList"),format=require("formatNumber"),LiveList=SearchList.extend({initialize:function(opt){this.type="live",this.columnName="\u76f4\u64ad",this.element="js-live-list",this.listTpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="";for(var i=0;i<list.length;i++){var data=list[i];if(__p+="\r\n	",1001!=data.game_bussType){__p+='\r\n	<li class="game-live-item">\r\n		';var url=TT.app.main+data.game_privateHost;if(1==data.screen_type&&2==data.liveSourceType)var screenshot=data.game_screenshot+"?imageview/4/0/w/190/h/338/rotate/270";else var screenshot=data.game_screenshot+"?imageview/4/0/w/338/h/190/blur/1";if(__p+='\r\n	    <a href="'+(null==(__t=url)?"":__t)+'" class="video-info new-clickstat" target="_blank" report=\'{"eid":"click/position","position":"search/'+(null==(__t=columnName)?"":__t)+"/"+(null==(__t=i+1)?"":__t)+'","game_id":"'+(null==(__t=data.gameId)?"":__t)+'","ayyuid":"'+(null==(__t=data.aid)?"":__t)+'"}\'>\r\n  			<img class="pic" src="'+(null==(__t=TT.trimUrl(screenshot))?"":__t)+'" alt="'+(null==(__t=data.game_nick)?"":_.escape(__t))+'\u7684\u76f4\u64ad" title="'+(null==(__t=data.game_nick)?"":_.escape(__t))+'\u7684\u76f4\u64ad">\r\n	        <div class="item-mask"></div>\r\n	        <i class="btn-link__hover_i"></i>\r\n	    </a>\r\n	    <a href="'+(null==(__t=url)?"":__t)+'" class="title new-clickstat" report=\'{"eid":"click/position","position":"search/'+(null==(__t=columnName)?"":__t)+"/"+(null==(__t=i+1)?"":__t)+'","game_id":"'+(null==(__t=data.gameId)?"":__t)+'","ayyuid":"'+(null==(__t=data.aid)?"":__t)+'"}\' title="'+(null==(__t=data.game_introduction)?"":_.escape(__t))+'" target="_blank">'+(null==(__t=$keywordProcess(data.game_introduction))?"":__t)+'</a>\r\n	    <span class="txt">\r\n	        <span class="avatar fl">\r\n	            <img src="'+(null==(__t=TT.trimUrl(data.game_imgUrl))?"":__t)+'" alt="'+(null==(__t=data.game_nick)?"":_.escape(__t))+'" title="'+(null==(__t=data.game_nick)?"":_.escape(__t))+'">\r\n	            <i class="nick" title="'+(null==(__t=data.game_nick)?"":_.escape(__t))+'">'+(null==(__t=$keywordProcess(data.game_nick))?"":__t)+"</i>\r\n	        </span>\r\n	        ","undefined"!=typeof data.gameHost)var gameTypeUrl=TT.app.main+"g/"+data.gameHost;else var gameTypeUrl=TT.app.main+"g/"+data.gameId;__p+='\r\n	        <span class="game-type fr"><a target="_blank" href="'+(null==(__t=gameTypeUrl)?"":__t)+'" title="'+(null==(__t=data.gameName)?"":__t)+'">'+(null==(__t=data.gameName)?"":__t)+'</a></span>\r\n	        <span class="num"><i class="num-icon"></i><i class="js-num">'+(null==(__t=format.formatNumber(data.game_total_count))?"":__t)+"</i></span>\r\n	    </span>\r\n	</li>\r\n	"}__p+="\r\n"}__p+="\r\n"}return __p},this.$jsSearchMain=opt.jsSearchMain,this.$findResult=opt.findResult,this.searchKey=opt.searchKey,this.getData=opt.getData,this.respNum=opt.respNum,this.pageRow=opt.pageRow},findResult:function(t){this.$findResult.html("\u627e\u5230<em>\u201c"+this.searchKey+"\u201d</em> \u76f8\u5173\u76f4\u64ad\u5171<em>"+(1e3>t?t:"1000+")+"</em>\u4e2a")}});module.exports=LiveList});
;dwfis.define("widget/search-video-list",function(require,exports,module){var SearchList=require("searchList"),format=require("formatNumber"),VideoList=SearchList.extend({initialize:function(opt){this.type="video",this.columnName="\u89c6\u9891",this.element="js-video-list",this.listTpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="";for(var i=0;i<list.length;i++){var data=list[i];__p+='\r\n    <li class="game-live-item">\r\n        <a href="'+(null==(__t=data.url)?"":__t)+'#vfrom=huyaweb" class="video-info new-clickstat" report=\'{"eid":"click/position","position":"search/'+(null==(__t=columnName)?"":__t)+"/"+(null==(__t=i+1)?"":__t)+'","user_id":"'+(null==(__t=data.user_id)?"":__t)+'"}\' target="_blank">\r\n            <img class="pic" src="'+(null==(__t=TT.trimUrl(data.cover)||"")?"":__t)+'" alt="'+(null==(__t=data.title)?"":_.escape(__t))+'" title="'+(null==(__t=data.title)?"":_.escape(__t))+'">\r\n            <div class="item-mask"></div>\r\n            <i class="btn-link__hover_i"></i>\r\n        </a>\r\n        <a href="'+(null==(__t=data.url)?"":__t)+'#vfrom=huyaweb" class="title new-clickstat" report=\'{"eid":"click/position","position":"search/'+(null==(__t=columnName)?"":__t)+"/"+(null==(__t=i+1)?"":__t)+'","user_id":"'+(null==(__t=data.user_id)?"":__t)+'"}\' title="'+(null==(__t=data.title)?"":_.escape(__t))+'" target="_blank">'+(null==(__t=$keywordProcess(data.title))?"":__t)+'</a>\r\n        <span class="txt">\r\n            <span class="avatar fl">\r\n                <img src="images/editor-avatar.gif" alt="'+(null==(__t=data.user_nickname)?"":_.escape(__t))+'" title="'+(null==(__t=data.user_nickname)?"":_.escape(__t))+'">\r\n                <i class="nick" title="'+(null==(__t=data.user_nickname)?"":_.escape(__t))+'">'+(null==(__t=data.user_nickname)?"":_.escape(__t))+'</i>\r\n            </span>\r\n            <span class="num"><i class="num-icon"></i><i class="js-num">'+(null==(__t=format.formatNumber(data.play_sum))?"":__t)+"</i></span>\r\n        </span>\r\n    </li>\r\n"}__p+=""}return __p},this.$jsSearchMain=opt.jsSearchMain,this.$findResult=opt.findResult,this.searchKey=opt.searchKey,this.getData=opt.getData,this.respNum=opt.respNum,this.pageRow=opt.pageRow},findResult:function(t){this.$findResult.html("\u627e\u5230<em>\u201c"+this.searchKey+"\u201d</em> \u76f8\u5173\u89c6\u9891\u5171<em>"+(1e3>t?t:"1000+")+"</em>\u4e2a")}});module.exports=VideoList});
;dwfis.define("widget/search-advice-list",function(require,exports,module){function dateFormat(e,t){var s=t,a=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"];return s=s.replace(/yyyy|YYYY/,e.getFullYear()),s=s.replace(/yy|YY/,e.getYear()%100>9?(e.getYear()%100).toString():"0"+e.getYear()%100),s=s.replace(/MM/,e.getMonth()+1>9?(e.getMonth()+1).toString():"0"+(e.getMonth()+1)),s=s.replace(/M/g,e.getMonth()+1),s=s.replace(/w|W/g,a[e.getDay()]),s=s.replace(/dd|DD/,e.getDate()>9?e.getDate().toString():"0"+e.getDate()),s=s.replace(/d|D/g,e.getDate()),s=s.replace(/hh|HH/,e.getHours()>9?e.getHours().toString():"0"+e.getHours()),s=s.replace(/h|H/g,e.getHours()),s=s.replace(/mm/,e.getMinutes()>9?e.getMinutes().toString():"0"+e.getMinutes()),s=s.replace(/m/g,e.getMinutes()),s=s.replace(/ss|SS/,e.getSeconds()>9?e.getSeconds().toString():"0"+e.getSeconds()),s=s.replace(/s|S/g,e.getSeconds())}var SearchList=require("searchList"),SearchAdviceList=SearchList.extend({initialize:function(opt){this.type="advice",this.columnName="\u8d44\u8baf",this.element="js-advice-list",this.listTpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){for(__p+=" ",i=0;i<list.length;i++){var data=list[i],date=new Date(1e3*data.createtime);__p+='\r\n<li><span class="tag">['+(null==(__t=data.tag)?"":__t)+']</span><a href="'+(null==(__t=data.url)?"":__t)+'" target="_blank" class="ellipsis new-clickstat" report=\'{"eid":"click/position","position":"search/'+(null==(__t=columnName)?"":__t)+"/"+(null==(__t=i+1)?"":__t)+'"}\' title="'+(null==(__t=data.title)?"":__t)+'">'+(null==(__t=$keywordProcess(data.title))?"":__t)+'</a><span class="date">'+(null==(__t=dateFormat(date,"YYYY-MM-DD"))?"":__t)+"</span></li>\r\n"}__p+=""}return __p},this.$jsSearchMain=opt.jsSearchMain,this.$findResult=opt.findResult,this.searchKey=opt.searchKey,this.getData=opt.getData,this.respNum=opt.respNum,this.pageRow=opt.pageRow,this.searchUrl=opt.searchUrl,this.searchDo="getSearchArticle"},findResult:function(e){this.$findResult.html("\u627e\u5230<em>\u201c"+this.searchKey+"\u201d</em> \u76f8\u5173\u8d44\u8baf\u5171<em>"+(1e3>e?e:"1000+")+"</em>\u4e2a")},_createList:function(){{var e=this;this.type}$.ajax({url:this.searchUrl,type:"GET",dataType:"jsonp",data:{m:"Search","do":this.searchDo,q:this.searchKey,uid:0,app:11,v:4,typ:-5,rows:40},success:function(t){var s=t;if(s.responseHeader&&0==s.responseHeader.status){var a=s.response[e.respNum].docs;if(e.numFound=s.response[e.respNum].numFound,a.length>0)return e.$listWrap.html(e.listTpl({list:a.slice(0,5),columnName:"all/"+e.type})),!1}e.$listWrap.parents(".search-box").remove()}})},renderList:function(){this.$jsSearchMain.html('<ul class="search-'+this.type+"-list clearfix inpage-"+this.type+'-list" id="'+this.element+'"></ul>'),this.initList(),this.appendItem()}});module.exports=SearchAdviceList});
;dwfis.define("widget/search-hot-list",function(require,exports,module){function SearchHotList(){this.initialize.apply(this,arguments)}SearchHotList.prototype={initialize:function(){this.type="hotList",this.$listWrap=$("#js-hot-list"),this.columnName="\u70ed\u641c\u699c\u5355",this.listTpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){for(__p+="\r\n\r\n\r\n",i=0,len=Math.ceil(list.length/5);len>i;i++){var num=5*i,arr=list.slice(num,num+5);for(__p+='\r\n\r\n<ul class="hot-search-list">\r\n\r\n	',j=0;j<arr.length;j++){var data=arr[j],url=TT.app.main+"search.php?hsk="+data;__p+='\r\n	 <li>\r\n	    <span class="hot-num hot-num-'+(null==(__t=j+1+num)?"":__t)+'">'+(null==(__t=j+1+num)?"":__t)+'</span>\r\n	    <a href="'+(null==(__t=url)?"":__t)+'" class="hot-name ellipsis new-clickstat" report=\'{"eid":"click/position","position":"search/'+(null==(__t=columnName)?"":__t)+"/"+(null==(__t=j+1+num)?"":__t)+"\"}'>"+(null==(__t=data)?"":_.escape(__t))+"</a>\r\n	</li>\r\n	"}__p+="\r\n</ul>\r\n"}__p+=""}return __p},this.createHtml()},createHtml:function(){var t=this;$.ajax({url:TT.app.main+"cache10min.php?m=Search&do=getHotword",type:"GET",dataType:"json"}).done(function(n){t.$listWrap.html(t.listTpl({list:n.slice(0,10),columnName:t.type}))})}},module.exports=SearchHotList});
;dwfis.define("app/search",function(require,exports,module){function escapeHtml(e){return e&&(e=e.replace(/[<>&]/g,"")),e}function SearchMediator(){this.initialize.apply(this,arguments)}var searchKey=parseQueryString(location.href).hsk||"\u864e\u7259",REG_KEYWORD_HIGHLIGHT=null;try{searchKey=decodeURIComponent(searchKey)}catch(e){}if(searchKey){searchKey=escapeHtml(searchKey);var regStr=searchKey.replace(/[^\w\u4e00-\u9fa5\-]/g," ").replace(/\-/g,"\\-");regStr&&(REG_KEYWORD_HIGHLIGHT=new RegExp("("+regStr+")","gi"))}require("widget/backtotop");var SearchBar=require("widget/search-bar"),GameList=require("widget/search-game-list"),HostList=require("widget/search-host-list"),LiveList=require("widget/search-live-list"),VideoList=require("widget/search-video-list"),AdviceList=require("widget/search-advice-list"),HotList=require("widget/search-hot-list"),searchFrameTmpl=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<div class="search-left">\r\n    <div class="search-box">\r\n        <div class="box-hd clearfix">\r\n            <h3 class="title">\u76f8\u5173\u4e3b\u64ad</h3>\r\n            <a href="javascript:void(0);" class="search-more clickstat" data-type="host" eid="click/search/anchormore" eid_desc="\u70b9\u51fb/\u641c\u7d22/\u66f4\u591a\u4e3b\u64ad">\u67e5\u770b\u5168\u90e8 &gt;</a>\r\n        </div>\r\n        <div class="box-bd">\r\n            <ul class="search-host-list clearfix searchbox-list" id="js-host-list"></ul>\r\n        </div>\r\n    </div>\r\n    <div class="search-box">\r\n        <div class="box-hd clearfix">\r\n            <h3 class="title">\u76f8\u5173\u6e38\u620f</h3>\r\n        </div>\r\n        <div class="box-bd">\r\n            <ul class="search-game-list clearfix searchbox-list" id="js-game-list"></ul>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="search-box">\r\n        <div class="box-hd clearfix">\r\n            <h3 class="title">\u76f8\u5173\u76f4\u64ad</h3>\r\n            <div class="des"><p class="kanguan-tip">\u6839\u636e\u770b\u5b98\u63a8\u8350\u6392\u540d\u8fdb\u884c\u6392\u5e8f<a href="http://blog.huya.com/news/3964" target="_blank" eid="click/search/kgxq" eid_desc="\u70b9\u51fb/\u641c\u7d22/\u770b\u5b98\u8be6\u60c5">\u8be6\u60c5<i>&gt;</i></a></p></div>\r\n            <a href="javascript:void(0);" class="search-more clickstat" data-type="live" eid="click/search/livemore" eid_desc="\u70b9\u51fb/\u641c\u7d22/\u66f4\u591a\u76f4\u64ad">\u67e5\u770b\u5168\u90e8 &gt; </a>\r\n        </div>\r\n        <div class="box-bd">\r\n            <ul class="search-live-list clearfix searchbox-list" id="js-live-list"></ul>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="search-box">\r\n        <div class="box-hd clearfix">\r\n            <h3 class="title">\u76f8\u5173\u89c6\u9891</h3>\r\n            <a href="javascript:void(0);" class="search-more clickstat" data-type="video" eid="click/search/vediomore" eid_desc="\u70b9\u51fb/\u641c\u7d22/\u66f4\u591a\u89c6\u9891">\u67e5\u770b\u5168\u90e8 &gt; </a>\r\n        </div>\r\n        <div class="box-bd">\r\n            <ul class="search-video-list clearfix searchbox-list" id="js-video-list"></ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="search-right">\r\n    <div class="search-box" id="advice-wrap">\r\n        <div class="box-hd clearfix">\r\n            <h3 class="title">\u76f8\u5173\u8d44\u8baf</h3>\r\n            <a href="javascript:void(0);" class="search-more clickstat" data-type="advice" eid="click/search/advicemore" eid_desc="\u70b9\u51fb/\u641c\u7d22/\u66f4\u591a\u54a8\u8be2">\u67e5\u770b\u5168\u90e8 &gt;</a>\r\n        </div>\r\n        <div class="box-bd">\r\n            <ul class="search-advice-list search-index-advice-list" id="js-advice-list">\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class="search-box" id="hot-search-wrap">\r\n        <div class="box-hd clearfix">\r\n            <h3 class="title">\u641c\u7d22\u699c\u5355</h3>\r\n        </div>\r\n        <div class="box-bd">\r\n            <div id="js-hot-list">\r\n                \r\n            </div>\r\n        </div>\r\n    </div> \r\n</div>';return __p},moreLoading=function(){var e=$(".more-loading");return function(s){s?e.show():e.hide()}}();window.$keywordProcess=function(e){var s={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},i=REG_KEYWORD_HIGHLIGHT;return e&&("string"!=typeof e&&(e=e.toString()),e=e.replace(/&(?![\w#]+;)|[<>"']/g,function(e){return s[e]}),i&&(e=e.replace(i,'<em class="type-keyword">$1</em>'))),e};var searchBar=new SearchBar;searchBar.setInputValue(searchKey);var searchUrl="//"+(TT.isProd?"":"test.")+"search.huya.com",ajaxGet="";SearchMediator.prototype={initialize:function(){this.pageRow=16,this.$searchNav=$("#js-search-nav"),this.$findResult=$(".find-result"),this.$jsSearchMain=$("#js-search-main"),this.gameList=new GameList,this.hostList=new HostList({jsSearchMain:this.$jsSearchMain,findResult:this.$findResult,getData:this.getData,searchKey:searchKey,searchUrl:searchUrl,pageRow:40,respNum:1}),this.liveList=new LiveList({jsSearchMain:this.$jsSearchMain,findResult:this.$findResult,getData:this.getData,searchKey:searchKey,pageRow:40,respNum:3}),this.videoList=new VideoList({jsSearchMain:this.$jsSearchMain,findResult:this.$findResult,getData:this.getData,searchKey:searchKey,pageRow:40,respNum:122}),this.adviceList=new AdviceList({jsSearchMain:this.$jsSearchMain,findResult:this.$findResult,getData:this.getData,searchKey:searchKey,searchUrl:searchUrl,pageRow:40,respNum:1025}),this.allFn(),this.bindEvent()},getData:function(e,s){var i={m:"Search","do":"getSearchContent",q:searchKey,uid:0,v:4,typ:-5,livestate:0,rows:40};i=$.extend(i,e),moreLoading(!0),ajaxGet&&ajaxGet.abort(),ajaxGet=$.ajax({url:searchUrl,type:"GET",dataType:"jsonp",data:i,success:function(e){moreLoading(!1),$.isFunction(s)&&s(e)}})},search:function(){var e=this;this.getData({rows:this.pageRow},function(s){e.initAllData(s)})},dataEmpty:function(e){this.$findResult.html("\u6682\u65e0<em>\u201c"+e+"\u201d</em> \u76f8\u5173\u641c\u7d22\u5185\u5bb9\uff0c\u4e3a\u60a8\u63a8\u8350\u4ee5\u4e0b\u76f4\u64ad");var s=$(".search-left");s.html($("#js-emptyDom").get(0).innerHTML),s.find("img").lazyload({threshold:200})},createHtml:function(){this.$jsSearchMain.html(searchFrameTmpl()).hide(),new HotList,this.adviceList.initList(!0),this.search()},initAllData:function(e){var s=e,i=0;if(0!==s.responseHeader.status)this.dataEmpty(searchKey);else{var a=s.response[1].docs,t=s.response[122].docs,r=s.response[3].docs,c=s.response[1024].docs,n=s.response[1].numFound,h=s.response[122].numFound,d=s.response[3].numFound,l=s.response[1024].numFound;i=n+h+d+l,this.$jsSearchMain.show(),0==i&&this.dataEmpty(searchKey),this.gameList.initList({tplData:c,type:"all/game"}),this.hostList.initList({tplData:a,gameNum:l,type:"all/host"}),this.liveList.initList({tplData:r,type:"all/live"}),this.videoList.initList({tplData:t,type:"all/video"})}this.navList(i+(this.adviceList.numFound||0))},allFn:function(){this.createHtml()},switchType:function(e){switch(e){case"all":this.allFn();break;case"live":this.liveList.renderList();break;case"host":this.hostList.renderList();break;case"video":this.videoList.renderList();break;case"advice":this.adviceList.renderList()}},navList:function(e){var s=$(window),i=this;0!==e&&this.$findResult.html("\u627e\u5230<em>\u201c"+searchKey+"\u201d</em> \u76f8\u5173\u5185\u5bb9\u5171<em>"+(1e3>e?e:"1000+")+"</em>\u4e2a"),this.$searchNav.find("span").off().click(function(){var e=$(this);e.hasClass("current")||(s.scrollTop(0),e.addClass("current").siblings().removeClass("current"),i.switchType(e.attr("data-type")))})},bindEvent:function(){var e=$(window),s=$("body"),i=this;this.$jsSearchMain.on("click",".search-more",function(){var e=$(this).attr("data-type");i.$searchNav.find("span[data-type="+e+"]").trigger("click")});var a=null;e.on("scroll.search",function(){a&&clearTimeout(a),a=setTimeout(function(){if(e.scrollTop()+e.height()>s.height()-500){var a=i.$searchNav.find(".current").attr("data-type");switch(a){case"live":i.liveList.appendItem();break;case"host":i.hostList.appendItem();break;case"video":i.videoList.appendItem();break;case"advice":i.adviceList.appendItem()}}},200)})}},new SearchMediator});